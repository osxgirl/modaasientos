{"ast":null,"code":"import React, { useEffect, useState, useRef, useCallback } from 'react';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nfunction __generator(thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\n\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n}\n\nfunction __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n\n  return ar;\n}\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn, module) {\n  return module = {\n    exports: {}\n  }, fn(module, module.exports), module.exports;\n}\n/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\n\n\nvar FUNC_ERROR_TEXT = 'Expected a function';\n/** Used as references for various `Number` constants. */\n\nvar NAN = 0 / 0;\n/** `Object#toString` result references. */\n\nvar symbolTag = '[object Symbol]';\n/** Used to match leading and trailing whitespace. */\n\nvar reTrim = /^\\s+|\\s+$/g;\n/** Used to detect bad signed hexadecimal string values. */\n\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n/** Used to detect binary string values. */\n\nvar reIsBinary = /^0b[01]+$/i;\n/** Used to detect octal string values. */\n\nvar reIsOctal = /^0o[0-7]+$/i;\n/** Built-in method references without a dependency on `root`. */\n\nvar freeParseInt = parseInt;\n/** Detect free variable `global` from Node.js. */\n\nvar freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\n/** Detect free variable `self`. */\n\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n/** Used as a reference to the global object. */\n\nvar root = freeGlobal || freeSelf || Function('return this')();\n/** Used for built-in method references. */\n\nvar objectProto = Object.prototype;\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\n\nvar objectToString = objectProto.toString;\n/* Built-in method references for those with the same name as other `lodash` methods. */\n\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\n\nvar now = function () {\n  return root.Date.now();\n};\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\n\n\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n\n  wait = toNumber(wait) || 0;\n\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time; // Start the timer for the trailing edge.\n\n    timerId = setTimeout(timerExpired, wait); // Invoke the leading edge.\n\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime; // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n\n    return lastCallTime === undefined || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n  }\n\n  function timerExpired() {\n    var time = now();\n\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    } // Restart the timer.\n\n\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined; // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n\n    return result;\n  }\n\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\n\n\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\n\n\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\n\n\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\n\n\nfunction isSymbol(value) {\n  return typeof value == 'symbol' || isObjectLike(value) && objectToString.call(value) == symbolTag;\n}\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\n\n\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n\n  if (isSymbol(value)) {\n    return NAN;\n  }\n\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? other + '' : other;\n  }\n\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n}\n\nvar lodash_throttle = throttle;\n\nvar Vector =\n/** @class */\nfunction () {\n  function Vector(x, y) {\n    if (x === void 0) {\n      x = 0;\n    }\n\n    if (y === void 0) {\n      y = 0;\n    }\n\n    this.x = x;\n    this.y = y;\n  }\n\n  Vector.prototype.add = function (vector) {\n    this.x += vector.x;\n    this.y += vector.y;\n    return this;\n  };\n\n  Vector.prototype.subtract = function (vector) {\n    this.x -= vector.x;\n    this.y -= vector.y;\n    return this;\n  };\n\n  Vector.prototype.addScalar = function (scalar) {\n    this.x += scalar;\n    this.y += scalar;\n    return this;\n  };\n\n  Vector.prototype.divideScalar = function (scalar) {\n    this.x = this.x / scalar;\n    this.y = this.y / scalar;\n    return this;\n  };\n\n  Vector.prototype.multiplyScalar = function (scalar) {\n    this.x = this.x * scalar;\n    this.y = this.y * scalar;\n    return this;\n  };\n\n  Vector.prototype.getMagnitude = function () {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  };\n\n  Vector.prototype.getAngle = function () {\n    return Math.atan2(this.y, this.x);\n  };\n\n  Vector.prototype.clone = function () {\n    return new Vector(this.x, this.y);\n  };\n\n  Vector.prototype.toUnit = function () {\n    var magnitude = this.getMagnitude();\n\n    if (magnitude) {\n      return this.clone().divideScalar(magnitude);\n    }\n\n    return this.clone();\n  };\n\n  Vector.from = function (angle, magnitude) {\n    return new Vector(magnitude * Math.cos(angle), magnitude * Math.sin(angle));\n  };\n\n  Vector.sum = function (vectors) {\n    var v = new Vector(0, 0);\n    vectors.forEach(function (vector) {\n      v.add(vector);\n    });\n    return v;\n  };\n\n  return Vector;\n}();\n\nvar lodash_flatmap = createCommonjsModule(function (module, exports) {\n  /**\n   * lodash (Custom Build) <https://lodash.com/>\n   * Build: `lodash modularize exports=\"npm\" -o ./`\n   * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n   * Released under MIT license <https://lodash.com/license>\n   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n   */\n\n  /** Used as the size to enable large array optimizations. */\n  var LARGE_ARRAY_SIZE = 200;\n  /** Used as the `TypeError` message for \"Functions\" methods. */\n\n  var FUNC_ERROR_TEXT = 'Expected a function';\n  /** Used to stand-in for `undefined` hash values. */\n\n  var HASH_UNDEFINED = '__lodash_hash_undefined__';\n  /** Used to compose bitmasks for comparison styles. */\n\n  var UNORDERED_COMPARE_FLAG = 1,\n      PARTIAL_COMPARE_FLAG = 2;\n  /** Used as references for various `Number` constants. */\n\n  var INFINITY = 1 / 0,\n      MAX_SAFE_INTEGER = 9007199254740991;\n  /** `Object#toString` result references. */\n\n  var argsTag = '[object Arguments]',\n      arrayTag = '[object Array]',\n      boolTag = '[object Boolean]',\n      dateTag = '[object Date]',\n      errorTag = '[object Error]',\n      funcTag = '[object Function]',\n      genTag = '[object GeneratorFunction]',\n      mapTag = '[object Map]',\n      numberTag = '[object Number]',\n      objectTag = '[object Object]',\n      promiseTag = '[object Promise]',\n      regexpTag = '[object RegExp]',\n      setTag = '[object Set]',\n      stringTag = '[object String]',\n      symbolTag = '[object Symbol]',\n      weakMapTag = '[object WeakMap]';\n  var arrayBufferTag = '[object ArrayBuffer]',\n      dataViewTag = '[object DataView]',\n      float32Tag = '[object Float32Array]',\n      float64Tag = '[object Float64Array]',\n      int8Tag = '[object Int8Array]',\n      int16Tag = '[object Int16Array]',\n      int32Tag = '[object Int32Array]',\n      uint8Tag = '[object Uint8Array]',\n      uint8ClampedTag = '[object Uint8ClampedArray]',\n      uint16Tag = '[object Uint16Array]',\n      uint32Tag = '[object Uint32Array]';\n  /** Used to match property names within property paths. */\n\n  var reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n      reIsPlainProp = /^\\w*$/,\n      reLeadingDot = /^\\./,\n      rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n  /**\n   * Used to match `RegExp`\n   * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n   */\n\n  var reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n  /** Used to match backslashes in property paths. */\n\n  var reEscapeChar = /\\\\(\\\\)?/g;\n  /** Used to detect host constructors (Safari). */\n\n  var reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n  /** Used to detect unsigned integer values. */\n\n  var reIsUint = /^(?:0|[1-9]\\d*)$/;\n  /** Used to identify `toStringTag` values of typed arrays. */\n\n  var typedArrayTags = {};\n  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = true;\n  typedArrayTags[argsTag] = typedArrayTags[arrayTag] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] = typedArrayTags[dataViewTag] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag] = typedArrayTags[mapTag] = typedArrayTags[numberTag] = typedArrayTags[objectTag] = typedArrayTags[regexpTag] = typedArrayTags[setTag] = typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;\n  /** Detect free variable `global` from Node.js. */\n\n  var freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\n  /** Detect free variable `self`. */\n\n  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n  /** Used as a reference to the global object. */\n\n  var root = freeGlobal || freeSelf || Function('return this')();\n  /** Detect free variable `exports`. */\n\n  var freeExports = exports && !exports.nodeType && exports;\n  /** Detect free variable `module`. */\n\n  var freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;\n  /** Detect the popular CommonJS extension `module.exports`. */\n\n  var moduleExports = freeModule && freeModule.exports === freeExports;\n  /** Detect free variable `process` from Node.js. */\n\n  var freeProcess = moduleExports && freeGlobal.process;\n  /** Used to access faster Node.js helpers. */\n\n  var nodeUtil = function () {\n    try {\n      return freeProcess && freeProcess.binding('util');\n    } catch (e) {}\n  }();\n  /* Node.js helper references. */\n\n\n  var nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n  /**\n   * A specialized version of `_.map` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the new mapped array.\n   */\n\n  function arrayMap(array, iteratee) {\n    var index = -1,\n        length = array ? array.length : 0,\n        result = Array(length);\n\n    while (++index < length) {\n      result[index] = iteratee(array[index], index, array);\n    }\n\n    return result;\n  }\n  /**\n   * Appends the elements of `values` to `array`.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {Array} values The values to append.\n   * @returns {Array} Returns `array`.\n   */\n\n\n  function arrayPush(array, values) {\n    var index = -1,\n        length = values.length,\n        offset = array.length;\n\n    while (++index < length) {\n      array[offset + index] = values[index];\n    }\n\n    return array;\n  }\n  /**\n   * A specialized version of `_.some` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if any element passes the predicate check,\n   *  else `false`.\n   */\n\n\n  function arraySome(array, predicate) {\n    var index = -1,\n        length = array ? array.length : 0;\n\n    while (++index < length) {\n      if (predicate(array[index], index, array)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n   * The base implementation of `_.property` without support for deep paths.\n   *\n   * @private\n   * @param {string} key The key of the property to get.\n   * @returns {Function} Returns the new accessor function.\n   */\n\n\n  function baseProperty(key) {\n    return function (object) {\n      return object == null ? undefined : object[key];\n    };\n  }\n  /**\n   * The base implementation of `_.times` without support for iteratee shorthands\n   * or max array length checks.\n   *\n   * @private\n   * @param {number} n The number of times to invoke `iteratee`.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the array of results.\n   */\n\n\n  function baseTimes(n, iteratee) {\n    var index = -1,\n        result = Array(n);\n\n    while (++index < n) {\n      result[index] = iteratee(index);\n    }\n\n    return result;\n  }\n  /**\n   * The base implementation of `_.unary` without support for storing metadata.\n   *\n   * @private\n   * @param {Function} func The function to cap arguments for.\n   * @returns {Function} Returns the new capped function.\n   */\n\n\n  function baseUnary(func) {\n    return function (value) {\n      return func(value);\n    };\n  }\n  /**\n   * Gets the value at `key` of `object`.\n   *\n   * @private\n   * @param {Object} [object] The object to query.\n   * @param {string} key The key of the property to get.\n   * @returns {*} Returns the property value.\n   */\n\n\n  function getValue(object, key) {\n    return object == null ? undefined : object[key];\n  }\n  /**\n   * Checks if `value` is a host object in IE < 9.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n   */\n\n\n  function isHostObject(value) {\n    // Many host objects are `Object` objects that can coerce to strings\n    // despite having improperly defined `toString` methods.\n    var result = false;\n\n    if (value != null && typeof value.toString != 'function') {\n      try {\n        result = !!(value + '');\n      } catch (e) {}\n    }\n\n    return result;\n  }\n  /**\n   * Converts `map` to its key-value pairs.\n   *\n   * @private\n   * @param {Object} map The map to convert.\n   * @returns {Array} Returns the key-value pairs.\n   */\n\n\n  function mapToArray(map) {\n    var index = -1,\n        result = Array(map.size);\n    map.forEach(function (value, key) {\n      result[++index] = [key, value];\n    });\n    return result;\n  }\n  /**\n   * Creates a unary function that invokes `func` with its argument transformed.\n   *\n   * @private\n   * @param {Function} func The function to wrap.\n   * @param {Function} transform The argument transform.\n   * @returns {Function} Returns the new function.\n   */\n\n\n  function overArg(func, transform) {\n    return function (arg) {\n      return func(transform(arg));\n    };\n  }\n  /**\n   * Converts `set` to an array of its values.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the values.\n   */\n\n\n  function setToArray(set) {\n    var index = -1,\n        result = Array(set.size);\n    set.forEach(function (value) {\n      result[++index] = value;\n    });\n    return result;\n  }\n  /** Used for built-in method references. */\n\n\n  var arrayProto = Array.prototype,\n      funcProto = Function.prototype,\n      objectProto = Object.prototype;\n  /** Used to detect overreaching core-js shims. */\n\n  var coreJsData = root['__core-js_shared__'];\n  /** Used to detect methods masquerading as native. */\n\n  var maskSrcKey = function () {\n    var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n    return uid ? 'Symbol(src)_1.' + uid : '';\n  }();\n  /** Used to resolve the decompiled source of functions. */\n\n\n  var funcToString = funcProto.toString;\n  /** Used to check objects for own properties. */\n\n  var hasOwnProperty = objectProto.hasOwnProperty;\n  /**\n   * Used to resolve the\n   * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n   * of values.\n   */\n\n  var objectToString = objectProto.toString;\n  /** Used to detect if a method is native. */\n\n  var reIsNative = RegExp('^' + funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&').replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$');\n  /** Built-in value references. */\n\n  var Symbol = root.Symbol,\n      Uint8Array = root.Uint8Array,\n      propertyIsEnumerable = objectProto.propertyIsEnumerable,\n      splice = arrayProto.splice,\n      spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n  /* Built-in method references for those with the same name as other `lodash` methods. */\n\n  var nativeKeys = overArg(Object.keys, Object);\n  /* Built-in method references that are verified to be native. */\n\n  var DataView = getNative(root, 'DataView'),\n      Map = getNative(root, 'Map'),\n      Promise = getNative(root, 'Promise'),\n      Set = getNative(root, 'Set'),\n      WeakMap = getNative(root, 'WeakMap'),\n      nativeCreate = getNative(Object, 'create');\n  /** Used to detect maps, sets, and weakmaps. */\n\n  var dataViewCtorString = toSource(DataView),\n      mapCtorString = toSource(Map),\n      promiseCtorString = toSource(Promise),\n      setCtorString = toSource(Set),\n      weakMapCtorString = toSource(WeakMap);\n  /** Used to convert symbols to primitives and strings. */\n\n  var symbolProto = Symbol ? Symbol.prototype : undefined,\n      symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,\n      symbolToString = symbolProto ? symbolProto.toString : undefined;\n  /**\n   * Creates a hash object.\n   *\n   * @private\n   * @constructor\n   * @param {Array} [entries] The key-value pairs to cache.\n   */\n\n  function Hash(entries) {\n    var index = -1,\n        length = entries ? entries.length : 0;\n    this.clear();\n\n    while (++index < length) {\n      var entry = entries[index];\n      this.set(entry[0], entry[1]);\n    }\n  }\n  /**\n   * Removes all key-value entries from the hash.\n   *\n   * @private\n   * @name clear\n   * @memberOf Hash\n   */\n\n\n  function hashClear() {\n    this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  }\n  /**\n   * Removes `key` and its value from the hash.\n   *\n   * @private\n   * @name delete\n   * @memberOf Hash\n   * @param {Object} hash The hash to modify.\n   * @param {string} key The key of the value to remove.\n   * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n   */\n\n\n  function hashDelete(key) {\n    return this.has(key) && delete this.__data__[key];\n  }\n  /**\n   * Gets the hash value for `key`.\n   *\n   * @private\n   * @name get\n   * @memberOf Hash\n   * @param {string} key The key of the value to get.\n   * @returns {*} Returns the entry value.\n   */\n\n\n  function hashGet(key) {\n    var data = this.__data__;\n\n    if (nativeCreate) {\n      var result = data[key];\n      return result === HASH_UNDEFINED ? undefined : result;\n    }\n\n    return hasOwnProperty.call(data, key) ? data[key] : undefined;\n  }\n  /**\n   * Checks if a hash value for `key` exists.\n   *\n   * @private\n   * @name has\n   * @memberOf Hash\n   * @param {string} key The key of the entry to check.\n   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n   */\n\n\n  function hashHas(key) {\n    var data = this.__data__;\n    return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n  }\n  /**\n   * Sets the hash `key` to `value`.\n   *\n   * @private\n   * @name set\n   * @memberOf Hash\n   * @param {string} key The key of the value to set.\n   * @param {*} value The value to set.\n   * @returns {Object} Returns the hash instance.\n   */\n\n\n  function hashSet(key, value) {\n    var data = this.__data__;\n    data[key] = nativeCreate && value === undefined ? HASH_UNDEFINED : value;\n    return this;\n  } // Add methods to `Hash`.\n\n\n  Hash.prototype.clear = hashClear;\n  Hash.prototype['delete'] = hashDelete;\n  Hash.prototype.get = hashGet;\n  Hash.prototype.has = hashHas;\n  Hash.prototype.set = hashSet;\n  /**\n   * Creates an list cache object.\n   *\n   * @private\n   * @constructor\n   * @param {Array} [entries] The key-value pairs to cache.\n   */\n\n  function ListCache(entries) {\n    var index = -1,\n        length = entries ? entries.length : 0;\n    this.clear();\n\n    while (++index < length) {\n      var entry = entries[index];\n      this.set(entry[0], entry[1]);\n    }\n  }\n  /**\n   * Removes all key-value entries from the list cache.\n   *\n   * @private\n   * @name clear\n   * @memberOf ListCache\n   */\n\n\n  function listCacheClear() {\n    this.__data__ = [];\n  }\n  /**\n   * Removes `key` and its value from the list cache.\n   *\n   * @private\n   * @name delete\n   * @memberOf ListCache\n   * @param {string} key The key of the value to remove.\n   * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n   */\n\n\n  function listCacheDelete(key) {\n    var data = this.__data__,\n        index = assocIndexOf(data, key);\n\n    if (index < 0) {\n      return false;\n    }\n\n    var lastIndex = data.length - 1;\n\n    if (index == lastIndex) {\n      data.pop();\n    } else {\n      splice.call(data, index, 1);\n    }\n\n    return true;\n  }\n  /**\n   * Gets the list cache value for `key`.\n   *\n   * @private\n   * @name get\n   * @memberOf ListCache\n   * @param {string} key The key of the value to get.\n   * @returns {*} Returns the entry value.\n   */\n\n\n  function listCacheGet(key) {\n    var data = this.__data__,\n        index = assocIndexOf(data, key);\n    return index < 0 ? undefined : data[index][1];\n  }\n  /**\n   * Checks if a list cache value for `key` exists.\n   *\n   * @private\n   * @name has\n   * @memberOf ListCache\n   * @param {string} key The key of the entry to check.\n   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n   */\n\n\n  function listCacheHas(key) {\n    return assocIndexOf(this.__data__, key) > -1;\n  }\n  /**\n   * Sets the list cache `key` to `value`.\n   *\n   * @private\n   * @name set\n   * @memberOf ListCache\n   * @param {string} key The key of the value to set.\n   * @param {*} value The value to set.\n   * @returns {Object} Returns the list cache instance.\n   */\n\n\n  function listCacheSet(key, value) {\n    var data = this.__data__,\n        index = assocIndexOf(data, key);\n\n    if (index < 0) {\n      data.push([key, value]);\n    } else {\n      data[index][1] = value;\n    }\n\n    return this;\n  } // Add methods to `ListCache`.\n\n\n  ListCache.prototype.clear = listCacheClear;\n  ListCache.prototype['delete'] = listCacheDelete;\n  ListCache.prototype.get = listCacheGet;\n  ListCache.prototype.has = listCacheHas;\n  ListCache.prototype.set = listCacheSet;\n  /**\n   * Creates a map cache object to store key-value pairs.\n   *\n   * @private\n   * @constructor\n   * @param {Array} [entries] The key-value pairs to cache.\n   */\n\n  function MapCache(entries) {\n    var index = -1,\n        length = entries ? entries.length : 0;\n    this.clear();\n\n    while (++index < length) {\n      var entry = entries[index];\n      this.set(entry[0], entry[1]);\n    }\n  }\n  /**\n   * Removes all key-value entries from the map.\n   *\n   * @private\n   * @name clear\n   * @memberOf MapCache\n   */\n\n\n  function mapCacheClear() {\n    this.__data__ = {\n      'hash': new Hash(),\n      'map': new (Map || ListCache)(),\n      'string': new Hash()\n    };\n  }\n  /**\n   * Removes `key` and its value from the map.\n   *\n   * @private\n   * @name delete\n   * @memberOf MapCache\n   * @param {string} key The key of the value to remove.\n   * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n   */\n\n\n  function mapCacheDelete(key) {\n    return getMapData(this, key)['delete'](key);\n  }\n  /**\n   * Gets the map value for `key`.\n   *\n   * @private\n   * @name get\n   * @memberOf MapCache\n   * @param {string} key The key of the value to get.\n   * @returns {*} Returns the entry value.\n   */\n\n\n  function mapCacheGet(key) {\n    return getMapData(this, key).get(key);\n  }\n  /**\n   * Checks if a map value for `key` exists.\n   *\n   * @private\n   * @name has\n   * @memberOf MapCache\n   * @param {string} key The key of the entry to check.\n   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n   */\n\n\n  function mapCacheHas(key) {\n    return getMapData(this, key).has(key);\n  }\n  /**\n   * Sets the map `key` to `value`.\n   *\n   * @private\n   * @name set\n   * @memberOf MapCache\n   * @param {string} key The key of the value to set.\n   * @param {*} value The value to set.\n   * @returns {Object} Returns the map cache instance.\n   */\n\n\n  function mapCacheSet(key, value) {\n    getMapData(this, key).set(key, value);\n    return this;\n  } // Add methods to `MapCache`.\n\n\n  MapCache.prototype.clear = mapCacheClear;\n  MapCache.prototype['delete'] = mapCacheDelete;\n  MapCache.prototype.get = mapCacheGet;\n  MapCache.prototype.has = mapCacheHas;\n  MapCache.prototype.set = mapCacheSet;\n  /**\n   *\n   * Creates an array cache object to store unique values.\n   *\n   * @private\n   * @constructor\n   * @param {Array} [values] The values to cache.\n   */\n\n  function SetCache(values) {\n    var index = -1,\n        length = values ? values.length : 0;\n    this.__data__ = new MapCache();\n\n    while (++index < length) {\n      this.add(values[index]);\n    }\n  }\n  /**\n   * Adds `value` to the array cache.\n   *\n   * @private\n   * @name add\n   * @memberOf SetCache\n   * @alias push\n   * @param {*} value The value to cache.\n   * @returns {Object} Returns the cache instance.\n   */\n\n\n  function setCacheAdd(value) {\n    this.__data__.set(value, HASH_UNDEFINED);\n\n    return this;\n  }\n  /**\n   * Checks if `value` is in the array cache.\n   *\n   * @private\n   * @name has\n   * @memberOf SetCache\n   * @param {*} value The value to search for.\n   * @returns {number} Returns `true` if `value` is found, else `false`.\n   */\n\n\n  function setCacheHas(value) {\n    return this.__data__.has(value);\n  } // Add methods to `SetCache`.\n\n\n  SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\n  SetCache.prototype.has = setCacheHas;\n  /**\n   * Creates a stack cache object to store key-value pairs.\n   *\n   * @private\n   * @constructor\n   * @param {Array} [entries] The key-value pairs to cache.\n   */\n\n  function Stack(entries) {\n    this.__data__ = new ListCache(entries);\n  }\n  /**\n   * Removes all key-value entries from the stack.\n   *\n   * @private\n   * @name clear\n   * @memberOf Stack\n   */\n\n\n  function stackClear() {\n    this.__data__ = new ListCache();\n  }\n  /**\n   * Removes `key` and its value from the stack.\n   *\n   * @private\n   * @name delete\n   * @memberOf Stack\n   * @param {string} key The key of the value to remove.\n   * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n   */\n\n\n  function stackDelete(key) {\n    return this.__data__['delete'](key);\n  }\n  /**\n   * Gets the stack value for `key`.\n   *\n   * @private\n   * @name get\n   * @memberOf Stack\n   * @param {string} key The key of the value to get.\n   * @returns {*} Returns the entry value.\n   */\n\n\n  function stackGet(key) {\n    return this.__data__.get(key);\n  }\n  /**\n   * Checks if a stack value for `key` exists.\n   *\n   * @private\n   * @name has\n   * @memberOf Stack\n   * @param {string} key The key of the entry to check.\n   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n   */\n\n\n  function stackHas(key) {\n    return this.__data__.has(key);\n  }\n  /**\n   * Sets the stack `key` to `value`.\n   *\n   * @private\n   * @name set\n   * @memberOf Stack\n   * @param {string} key The key of the value to set.\n   * @param {*} value The value to set.\n   * @returns {Object} Returns the stack cache instance.\n   */\n\n\n  function stackSet(key, value) {\n    var cache = this.__data__;\n\n    if (cache instanceof ListCache) {\n      var pairs = cache.__data__;\n\n      if (!Map || pairs.length < LARGE_ARRAY_SIZE - 1) {\n        pairs.push([key, value]);\n        return this;\n      }\n\n      cache = this.__data__ = new MapCache(pairs);\n    }\n\n    cache.set(key, value);\n    return this;\n  } // Add methods to `Stack`.\n\n\n  Stack.prototype.clear = stackClear;\n  Stack.prototype['delete'] = stackDelete;\n  Stack.prototype.get = stackGet;\n  Stack.prototype.has = stackHas;\n  Stack.prototype.set = stackSet;\n  /**\n   * Creates an array of the enumerable property names of the array-like `value`.\n   *\n   * @private\n   * @param {*} value The value to query.\n   * @param {boolean} inherited Specify returning inherited property names.\n   * @returns {Array} Returns the array of property names.\n   */\n\n  function arrayLikeKeys(value, inherited) {\n    // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n    // Safari 9 makes `arguments.length` enumerable in strict mode.\n    var result = isArray(value) || isArguments(value) ? baseTimes(value.length, String) : [];\n    var length = result.length,\n        skipIndexes = !!length;\n\n    for (var key in value) {\n      if ((inherited || hasOwnProperty.call(value, key)) && !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n        result.push(key);\n      }\n    }\n\n    return result;\n  }\n  /**\n   * Gets the index at which the `key` is found in `array` of key-value pairs.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} key The key to search for.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n\n\n  function assocIndexOf(array, key) {\n    var length = array.length;\n\n    while (length--) {\n      if (eq(array[length][0], key)) {\n        return length;\n      }\n    }\n\n    return -1;\n  }\n  /**\n   * The base implementation of `_.forEach` without support for iteratee shorthands.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array|Object} Returns `collection`.\n   */\n\n\n  var baseEach = createBaseEach(baseForOwn);\n  /**\n   * The base implementation of `_.flatten` with support for restricting flattening.\n   *\n   * @private\n   * @param {Array} array The array to flatten.\n   * @param {number} depth The maximum recursion depth.\n   * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n   * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n   * @param {Array} [result=[]] The initial result value.\n   * @returns {Array} Returns the new flattened array.\n   */\n\n  function baseFlatten(array, depth, predicate, isStrict, result) {\n    var index = -1,\n        length = array.length;\n    predicate || (predicate = isFlattenable);\n    result || (result = []);\n\n    while (++index < length) {\n      var value = array[index];\n\n      if (depth > 0 && predicate(value)) {\n        if (depth > 1) {\n          // Recursively flatten arrays (susceptible to call stack limits).\n          baseFlatten(value, depth - 1, predicate, isStrict, result);\n        } else {\n          arrayPush(result, value);\n        }\n      } else if (!isStrict) {\n        result[result.length] = value;\n      }\n    }\n\n    return result;\n  }\n  /**\n   * The base implementation of `baseForOwn` which iterates over `object`\n   * properties returned by `keysFunc` and invokes `iteratee` for each property.\n   * Iteratee functions may exit iteration early by explicitly returning `false`.\n   *\n   * @private\n   * @param {Object} object The object to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {Function} keysFunc The function to get the keys of `object`.\n   * @returns {Object} Returns `object`.\n   */\n\n\n  var baseFor = createBaseFor();\n  /**\n   * The base implementation of `_.forOwn` without support for iteratee shorthands.\n   *\n   * @private\n   * @param {Object} object The object to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Object} Returns `object`.\n   */\n\n  function baseForOwn(object, iteratee) {\n    return object && baseFor(object, iteratee, keys);\n  }\n  /**\n   * The base implementation of `_.get` without support for default values.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array|string} path The path of the property to get.\n   * @returns {*} Returns the resolved value.\n   */\n\n\n  function baseGet(object, path) {\n    path = isKey(path, object) ? [path] : castPath(path);\n    var index = 0,\n        length = path.length;\n\n    while (object != null && index < length) {\n      object = object[toKey(path[index++])];\n    }\n\n    return index && index == length ? object : undefined;\n  }\n  /**\n   * The base implementation of `getTag`.\n   *\n   * @private\n   * @param {*} value The value to query.\n   * @returns {string} Returns the `toStringTag`.\n   */\n\n\n  function baseGetTag(value) {\n    return objectToString.call(value);\n  }\n  /**\n   * The base implementation of `_.hasIn` without support for deep paths.\n   *\n   * @private\n   * @param {Object} [object] The object to query.\n   * @param {Array|string} key The key to check.\n   * @returns {boolean} Returns `true` if `key` exists, else `false`.\n   */\n\n\n  function baseHasIn(object, key) {\n    return object != null && key in Object(object);\n  }\n  /**\n   * The base implementation of `_.isEqual` which supports partial comparisons\n   * and tracks traversed objects.\n   *\n   * @private\n   * @param {*} value The value to compare.\n   * @param {*} other The other value to compare.\n   * @param {Function} [customizer] The function to customize comparisons.\n   * @param {boolean} [bitmask] The bitmask of comparison flags.\n   *  The bitmask may be composed of the following flags:\n   *     1 - Unordered comparison\n   *     2 - Partial comparison\n   * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n   * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n   */\n\n\n  function baseIsEqual(value, other, customizer, bitmask, stack) {\n    if (value === other) {\n      return true;\n    }\n\n    if (value == null || other == null || !isObject(value) && !isObjectLike(other)) {\n      return value !== value && other !== other;\n    }\n\n    return baseIsEqualDeep(value, other, baseIsEqual, customizer, bitmask, stack);\n  }\n  /**\n   * A specialized version of `baseIsEqual` for arrays and objects which performs\n   * deep comparisons and tracks traversed objects enabling objects with circular\n   * references to be compared.\n   *\n   * @private\n   * @param {Object} object The object to compare.\n   * @param {Object} other The other object to compare.\n   * @param {Function} equalFunc The function to determine equivalents of values.\n   * @param {Function} [customizer] The function to customize comparisons.\n   * @param {number} [bitmask] The bitmask of comparison flags. See `baseIsEqual`\n   *  for more details.\n   * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n   * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n   */\n\n\n  function baseIsEqualDeep(object, other, equalFunc, customizer, bitmask, stack) {\n    var objIsArr = isArray(object),\n        othIsArr = isArray(other),\n        objTag = arrayTag,\n        othTag = arrayTag;\n\n    if (!objIsArr) {\n      objTag = getTag(object);\n      objTag = objTag == argsTag ? objectTag : objTag;\n    }\n\n    if (!othIsArr) {\n      othTag = getTag(other);\n      othTag = othTag == argsTag ? objectTag : othTag;\n    }\n\n    var objIsObj = objTag == objectTag && !isHostObject(object),\n        othIsObj = othTag == objectTag && !isHostObject(other),\n        isSameTag = objTag == othTag;\n\n    if (isSameTag && !objIsObj) {\n      stack || (stack = new Stack());\n      return objIsArr || isTypedArray(object) ? equalArrays(object, other, equalFunc, customizer, bitmask, stack) : equalByTag(object, other, objTag, equalFunc, customizer, bitmask, stack);\n    }\n\n    if (!(bitmask & PARTIAL_COMPARE_FLAG)) {\n      var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n          othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n      if (objIsWrapped || othIsWrapped) {\n        var objUnwrapped = objIsWrapped ? object.value() : object,\n            othUnwrapped = othIsWrapped ? other.value() : other;\n        stack || (stack = new Stack());\n        return equalFunc(objUnwrapped, othUnwrapped, customizer, bitmask, stack);\n      }\n    }\n\n    if (!isSameTag) {\n      return false;\n    }\n\n    stack || (stack = new Stack());\n    return equalObjects(object, other, equalFunc, customizer, bitmask, stack);\n  }\n  /**\n   * The base implementation of `_.isMatch` without support for iteratee shorthands.\n   *\n   * @private\n   * @param {Object} object The object to inspect.\n   * @param {Object} source The object of property values to match.\n   * @param {Array} matchData The property names, values, and compare flags to match.\n   * @param {Function} [customizer] The function to customize comparisons.\n   * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n   */\n\n\n  function baseIsMatch(object, source, matchData, customizer) {\n    var index = matchData.length,\n        length = index,\n        noCustomizer = !customizer;\n\n    if (object == null) {\n      return !length;\n    }\n\n    object = Object(object);\n\n    while (index--) {\n      var data = matchData[index];\n\n      if (noCustomizer && data[2] ? data[1] !== object[data[0]] : !(data[0] in object)) {\n        return false;\n      }\n    }\n\n    while (++index < length) {\n      data = matchData[index];\n      var key = data[0],\n          objValue = object[key],\n          srcValue = data[1];\n\n      if (noCustomizer && data[2]) {\n        if (objValue === undefined && !(key in object)) {\n          return false;\n        }\n      } else {\n        var stack = new Stack();\n\n        if (customizer) {\n          var result = customizer(objValue, srcValue, key, object, source, stack);\n        }\n\n        if (!(result === undefined ? baseIsEqual(srcValue, objValue, customizer, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG, stack) : result)) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  }\n  /**\n   * The base implementation of `_.isNative` without bad shim checks.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is a native function,\n   *  else `false`.\n   */\n\n\n  function baseIsNative(value) {\n    if (!isObject(value) || isMasked(value)) {\n      return false;\n    }\n\n    var pattern = isFunction(value) || isHostObject(value) ? reIsNative : reIsHostCtor;\n    return pattern.test(toSource(value));\n  }\n  /**\n   * The base implementation of `_.isTypedArray` without Node.js optimizations.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n   */\n\n\n  function baseIsTypedArray(value) {\n    return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[objectToString.call(value)];\n  }\n  /**\n   * The base implementation of `_.iteratee`.\n   *\n   * @private\n   * @param {*} [value=_.identity] The value to convert to an iteratee.\n   * @returns {Function} Returns the iteratee.\n   */\n\n\n  function baseIteratee(value) {\n    // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n    // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n    if (typeof value == 'function') {\n      return value;\n    }\n\n    if (value == null) {\n      return identity;\n    }\n\n    if (typeof value == 'object') {\n      return isArray(value) ? baseMatchesProperty(value[0], value[1]) : baseMatches(value);\n    }\n\n    return property(value);\n  }\n  /**\n   * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @returns {Array} Returns the array of property names.\n   */\n\n\n  function baseKeys(object) {\n    if (!isPrototype(object)) {\n      return nativeKeys(object);\n    }\n\n    var result = [];\n\n    for (var key in Object(object)) {\n      if (hasOwnProperty.call(object, key) && key != 'constructor') {\n        result.push(key);\n      }\n    }\n\n    return result;\n  }\n  /**\n   * The base implementation of `_.map` without support for iteratee shorthands.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the new mapped array.\n   */\n\n\n  function baseMap(collection, iteratee) {\n    var index = -1,\n        result = isArrayLike(collection) ? Array(collection.length) : [];\n    baseEach(collection, function (value, key, collection) {\n      result[++index] = iteratee(value, key, collection);\n    });\n    return result;\n  }\n  /**\n   * The base implementation of `_.matches` which doesn't clone `source`.\n   *\n   * @private\n   * @param {Object} source The object of property values to match.\n   * @returns {Function} Returns the new spec function.\n   */\n\n\n  function baseMatches(source) {\n    var matchData = getMatchData(source);\n\n    if (matchData.length == 1 && matchData[0][2]) {\n      return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n    }\n\n    return function (object) {\n      return object === source || baseIsMatch(object, source, matchData);\n    };\n  }\n  /**\n   * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n   *\n   * @private\n   * @param {string} path The path of the property to get.\n   * @param {*} srcValue The value to match.\n   * @returns {Function} Returns the new spec function.\n   */\n\n\n  function baseMatchesProperty(path, srcValue) {\n    if (isKey(path) && isStrictComparable(srcValue)) {\n      return matchesStrictComparable(toKey(path), srcValue);\n    }\n\n    return function (object) {\n      var objValue = get(object, path);\n      return objValue === undefined && objValue === srcValue ? hasIn(object, path) : baseIsEqual(srcValue, objValue, undefined, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG);\n    };\n  }\n  /**\n   * A specialized version of `baseProperty` which supports deep paths.\n   *\n   * @private\n   * @param {Array|string} path The path of the property to get.\n   * @returns {Function} Returns the new accessor function.\n   */\n\n\n  function basePropertyDeep(path) {\n    return function (object) {\n      return baseGet(object, path);\n    };\n  }\n  /**\n   * The base implementation of `_.toString` which doesn't convert nullish\n   * values to empty strings.\n   *\n   * @private\n   * @param {*} value The value to process.\n   * @returns {string} Returns the string.\n   */\n\n\n  function baseToString(value) {\n    // Exit early for strings to avoid a performance hit in some environments.\n    if (typeof value == 'string') {\n      return value;\n    }\n\n    if (isSymbol(value)) {\n      return symbolToString ? symbolToString.call(value) : '';\n    }\n\n    var result = value + '';\n    return result == '0' && 1 / value == -INFINITY ? '-0' : result;\n  }\n  /**\n   * Casts `value` to a path array if it's not one.\n   *\n   * @private\n   * @param {*} value The value to inspect.\n   * @returns {Array} Returns the cast property path array.\n   */\n\n\n  function castPath(value) {\n    return isArray(value) ? value : stringToPath(value);\n  }\n  /**\n   * Creates a `baseEach` or `baseEachRight` function.\n   *\n   * @private\n   * @param {Function} eachFunc The function to iterate over a collection.\n   * @param {boolean} [fromRight] Specify iterating from right to left.\n   * @returns {Function} Returns the new base function.\n   */\n\n\n  function createBaseEach(eachFunc, fromRight) {\n    return function (collection, iteratee) {\n      if (collection == null) {\n        return collection;\n      }\n\n      if (!isArrayLike(collection)) {\n        return eachFunc(collection, iteratee);\n      }\n\n      var length = collection.length,\n          index = fromRight ? length : -1,\n          iterable = Object(collection);\n\n      while (fromRight ? index-- : ++index < length) {\n        if (iteratee(iterable[index], index, iterable) === false) {\n          break;\n        }\n      }\n\n      return collection;\n    };\n  }\n  /**\n   * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n   *\n   * @private\n   * @param {boolean} [fromRight] Specify iterating from right to left.\n   * @returns {Function} Returns the new base function.\n   */\n\n\n  function createBaseFor(fromRight) {\n    return function (object, iteratee, keysFunc) {\n      var index = -1,\n          iterable = Object(object),\n          props = keysFunc(object),\n          length = props.length;\n\n      while (length--) {\n        var key = props[fromRight ? length : ++index];\n\n        if (iteratee(iterable[key], key, iterable) === false) {\n          break;\n        }\n      }\n\n      return object;\n    };\n  }\n  /**\n   * A specialized version of `baseIsEqualDeep` for arrays with support for\n   * partial deep comparisons.\n   *\n   * @private\n   * @param {Array} array The array to compare.\n   * @param {Array} other The other array to compare.\n   * @param {Function} equalFunc The function to determine equivalents of values.\n   * @param {Function} customizer The function to customize comparisons.\n   * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n   *  for more details.\n   * @param {Object} stack Tracks traversed `array` and `other` objects.\n   * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n   */\n\n\n  function equalArrays(array, other, equalFunc, customizer, bitmask, stack) {\n    var isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n        arrLength = array.length,\n        othLength = other.length;\n\n    if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n      return false;\n    } // Assume cyclic values are equal.\n\n\n    var stacked = stack.get(array);\n\n    if (stacked && stack.get(other)) {\n      return stacked == other;\n    }\n\n    var index = -1,\n        result = true,\n        seen = bitmask & UNORDERED_COMPARE_FLAG ? new SetCache() : undefined;\n    stack.set(array, other);\n    stack.set(other, array); // Ignore non-index properties.\n\n    while (++index < arrLength) {\n      var arrValue = array[index],\n          othValue = other[index];\n\n      if (customizer) {\n        var compared = isPartial ? customizer(othValue, arrValue, index, other, array, stack) : customizer(arrValue, othValue, index, array, other, stack);\n      }\n\n      if (compared !== undefined) {\n        if (compared) {\n          continue;\n        }\n\n        result = false;\n        break;\n      } // Recursively compare arrays (susceptible to call stack limits).\n\n\n      if (seen) {\n        if (!arraySome(other, function (othValue, othIndex) {\n          if (!seen.has(othIndex) && (arrValue === othValue || equalFunc(arrValue, othValue, customizer, bitmask, stack))) {\n            return seen.add(othIndex);\n          }\n        })) {\n          result = false;\n          break;\n        }\n      } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, customizer, bitmask, stack))) {\n        result = false;\n        break;\n      }\n    }\n\n    stack['delete'](array);\n    stack['delete'](other);\n    return result;\n  }\n  /**\n   * A specialized version of `baseIsEqualDeep` for comparing objects of\n   * the same `toStringTag`.\n   *\n   * **Note:** This function only supports comparing values with tags of\n   * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n   *\n   * @private\n   * @param {Object} object The object to compare.\n   * @param {Object} other The other object to compare.\n   * @param {string} tag The `toStringTag` of the objects to compare.\n   * @param {Function} equalFunc The function to determine equivalents of values.\n   * @param {Function} customizer The function to customize comparisons.\n   * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n   *  for more details.\n   * @param {Object} stack Tracks traversed `object` and `other` objects.\n   * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n   */\n\n\n  function equalByTag(object, other, tag, equalFunc, customizer, bitmask, stack) {\n    switch (tag) {\n      case dataViewTag:\n        if (object.byteLength != other.byteLength || object.byteOffset != other.byteOffset) {\n          return false;\n        }\n\n        object = object.buffer;\n        other = other.buffer;\n\n      case arrayBufferTag:\n        if (object.byteLength != other.byteLength || !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n          return false;\n        }\n\n        return true;\n\n      case boolTag:\n      case dateTag:\n      case numberTag:\n        // Coerce booleans to `1` or `0` and dates to milliseconds.\n        // Invalid dates are coerced to `NaN`.\n        return eq(+object, +other);\n\n      case errorTag:\n        return object.name == other.name && object.message == other.message;\n\n      case regexpTag:\n      case stringTag:\n        // Coerce regexes to strings and treat strings, primitives and objects,\n        // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n        // for more details.\n        return object == other + '';\n\n      case mapTag:\n        var convert = mapToArray;\n\n      case setTag:\n        var isPartial = bitmask & PARTIAL_COMPARE_FLAG;\n        convert || (convert = setToArray);\n\n        if (object.size != other.size && !isPartial) {\n          return false;\n        } // Assume cyclic values are equal.\n\n\n        var stacked = stack.get(object);\n\n        if (stacked) {\n          return stacked == other;\n        }\n\n        bitmask |= UNORDERED_COMPARE_FLAG; // Recursively compare objects (susceptible to call stack limits).\n\n        stack.set(object, other);\n        var result = equalArrays(convert(object), convert(other), equalFunc, customizer, bitmask, stack);\n        stack['delete'](object);\n        return result;\n\n      case symbolTag:\n        if (symbolValueOf) {\n          return symbolValueOf.call(object) == symbolValueOf.call(other);\n        }\n\n    }\n\n    return false;\n  }\n  /**\n   * A specialized version of `baseIsEqualDeep` for objects with support for\n   * partial deep comparisons.\n   *\n   * @private\n   * @param {Object} object The object to compare.\n   * @param {Object} other The other object to compare.\n   * @param {Function} equalFunc The function to determine equivalents of values.\n   * @param {Function} customizer The function to customize comparisons.\n   * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n   *  for more details.\n   * @param {Object} stack Tracks traversed `object` and `other` objects.\n   * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n   */\n\n\n  function equalObjects(object, other, equalFunc, customizer, bitmask, stack) {\n    var isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n        objProps = keys(object),\n        objLength = objProps.length,\n        othProps = keys(other),\n        othLength = othProps.length;\n\n    if (objLength != othLength && !isPartial) {\n      return false;\n    }\n\n    var index = objLength;\n\n    while (index--) {\n      var key = objProps[index];\n\n      if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n        return false;\n      }\n    } // Assume cyclic values are equal.\n\n\n    var stacked = stack.get(object);\n\n    if (stacked && stack.get(other)) {\n      return stacked == other;\n    }\n\n    var result = true;\n    stack.set(object, other);\n    stack.set(other, object);\n    var skipCtor = isPartial;\n\n    while (++index < objLength) {\n      key = objProps[index];\n      var objValue = object[key],\n          othValue = other[key];\n\n      if (customizer) {\n        var compared = isPartial ? customizer(othValue, objValue, key, other, object, stack) : customizer(objValue, othValue, key, object, other, stack);\n      } // Recursively compare objects (susceptible to call stack limits).\n\n\n      if (!(compared === undefined ? objValue === othValue || equalFunc(objValue, othValue, customizer, bitmask, stack) : compared)) {\n        result = false;\n        break;\n      }\n\n      skipCtor || (skipCtor = key == 'constructor');\n    }\n\n    if (result && !skipCtor) {\n      var objCtor = object.constructor,\n          othCtor = other.constructor; // Non `Object` object instances with different constructors are not equal.\n\n      if (objCtor != othCtor && 'constructor' in object && 'constructor' in other && !(typeof objCtor == 'function' && objCtor instanceof objCtor && typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n        result = false;\n      }\n    }\n\n    stack['delete'](object);\n    stack['delete'](other);\n    return result;\n  }\n  /**\n   * Gets the data for `map`.\n   *\n   * @private\n   * @param {Object} map The map to query.\n   * @param {string} key The reference key.\n   * @returns {*} Returns the map data.\n   */\n\n\n  function getMapData(map, key) {\n    var data = map.__data__;\n    return isKeyable(key) ? data[typeof key == 'string' ? 'string' : 'hash'] : data.map;\n  }\n  /**\n   * Gets the property names, values, and compare flags of `object`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @returns {Array} Returns the match data of `object`.\n   */\n\n\n  function getMatchData(object) {\n    var result = keys(object),\n        length = result.length;\n\n    while (length--) {\n      var key = result[length],\n          value = object[key];\n      result[length] = [key, value, isStrictComparable(value)];\n    }\n\n    return result;\n  }\n  /**\n   * Gets the native function at `key` of `object`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {string} key The key of the method to get.\n   * @returns {*} Returns the function if it's native, else `undefined`.\n   */\n\n\n  function getNative(object, key) {\n    var value = getValue(object, key);\n    return baseIsNative(value) ? value : undefined;\n  }\n  /**\n   * Gets the `toStringTag` of `value`.\n   *\n   * @private\n   * @param {*} value The value to query.\n   * @returns {string} Returns the `toStringTag`.\n   */\n\n\n  var getTag = baseGetTag; // Fallback for data views, maps, sets, and weak maps in IE 11,\n  // for data views in Edge < 14, and promises in Node.js.\n\n  if (DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag || Map && getTag(new Map()) != mapTag || Promise && getTag(Promise.resolve()) != promiseTag || Set && getTag(new Set()) != setTag || WeakMap && getTag(new WeakMap()) != weakMapTag) {\n    getTag = function (value) {\n      var result = objectToString.call(value),\n          Ctor = result == objectTag ? value.constructor : undefined,\n          ctorString = Ctor ? toSource(Ctor) : undefined;\n\n      if (ctorString) {\n        switch (ctorString) {\n          case dataViewCtorString:\n            return dataViewTag;\n\n          case mapCtorString:\n            return mapTag;\n\n          case promiseCtorString:\n            return promiseTag;\n\n          case setCtorString:\n            return setTag;\n\n          case weakMapCtorString:\n            return weakMapTag;\n        }\n      }\n\n      return result;\n    };\n  }\n  /**\n   * Checks if `path` exists on `object`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array|string} path The path to check.\n   * @param {Function} hasFunc The function to check properties.\n   * @returns {boolean} Returns `true` if `path` exists, else `false`.\n   */\n\n\n  function hasPath(object, path, hasFunc) {\n    path = isKey(path, object) ? [path] : castPath(path);\n    var result,\n        index = -1,\n        length = path.length;\n\n    while (++index < length) {\n      var key = toKey(path[index]);\n\n      if (!(result = object != null && hasFunc(object, key))) {\n        break;\n      }\n\n      object = object[key];\n    }\n\n    if (result) {\n      return result;\n    }\n\n    var length = object ? object.length : 0;\n    return !!length && isLength(length) && isIndex(key, length) && (isArray(object) || isArguments(object));\n  }\n  /**\n   * Checks if `value` is a flattenable `arguments` object or array.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n   */\n\n\n  function isFlattenable(value) {\n    return isArray(value) || isArguments(value) || !!(spreadableSymbol && value && value[spreadableSymbol]);\n  }\n  /**\n   * Checks if `value` is a valid array-like index.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n   * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n   */\n\n\n  function isIndex(value, length) {\n    length = length == null ? MAX_SAFE_INTEGER : length;\n    return !!length && (typeof value == 'number' || reIsUint.test(value)) && value > -1 && value % 1 == 0 && value < length;\n  }\n  /**\n   * Checks if `value` is a property name and not a property path.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @param {Object} [object] The object to query keys on.\n   * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n   */\n\n\n  function isKey(value, object) {\n    if (isArray(value)) {\n      return false;\n    }\n\n    var type = typeof value;\n\n    if (type == 'number' || type == 'symbol' || type == 'boolean' || value == null || isSymbol(value)) {\n      return true;\n    }\n\n    return reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object(object);\n  }\n  /**\n   * Checks if `value` is suitable for use as unique object key.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n   */\n\n\n  function isKeyable(value) {\n    var type = typeof value;\n    return type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean' ? value !== '__proto__' : value === null;\n  }\n  /**\n   * Checks if `func` has its source masked.\n   *\n   * @private\n   * @param {Function} func The function to check.\n   * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n   */\n\n\n  function isMasked(func) {\n    return !!maskSrcKey && maskSrcKey in func;\n  }\n  /**\n   * Checks if `value` is likely a prototype object.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n   */\n\n\n  function isPrototype(value) {\n    var Ctor = value && value.constructor,\n        proto = typeof Ctor == 'function' && Ctor.prototype || objectProto;\n    return value === proto;\n  }\n  /**\n   * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` if suitable for strict\n   *  equality comparisons, else `false`.\n   */\n\n\n  function isStrictComparable(value) {\n    return value === value && !isObject(value);\n  }\n  /**\n   * A specialized version of `matchesProperty` for source values suitable\n   * for strict equality comparisons, i.e. `===`.\n   *\n   * @private\n   * @param {string} key The key of the property to get.\n   * @param {*} srcValue The value to match.\n   * @returns {Function} Returns the new spec function.\n   */\n\n\n  function matchesStrictComparable(key, srcValue) {\n    return function (object) {\n      if (object == null) {\n        return false;\n      }\n\n      return object[key] === srcValue && (srcValue !== undefined || key in Object(object));\n    };\n  }\n  /**\n   * Converts `string` to a property path array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the property path array.\n   */\n\n\n  var stringToPath = memoize(function (string) {\n    string = toString(string);\n    var result = [];\n\n    if (reLeadingDot.test(string)) {\n      result.push('');\n    }\n\n    string.replace(rePropName, function (match, number, quote, string) {\n      result.push(quote ? string.replace(reEscapeChar, '$1') : number || match);\n    });\n    return result;\n  });\n  /**\n   * Converts `value` to a string key if it's not a string or symbol.\n   *\n   * @private\n   * @param {*} value The value to inspect.\n   * @returns {string|symbol} Returns the key.\n   */\n\n  function toKey(value) {\n    if (typeof value == 'string' || isSymbol(value)) {\n      return value;\n    }\n\n    var result = value + '';\n    return result == '0' && 1 / value == -INFINITY ? '-0' : result;\n  }\n  /**\n   * Converts `func` to its source code.\n   *\n   * @private\n   * @param {Function} func The function to process.\n   * @returns {string} Returns the source code.\n   */\n\n\n  function toSource(func) {\n    if (func != null) {\n      try {\n        return funcToString.call(func);\n      } catch (e) {}\n\n      try {\n        return func + '';\n      } catch (e) {}\n    }\n\n    return '';\n  }\n  /**\n   * Creates a flattened array of values by running each element in `collection`\n   * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n   * with three arguments: (value, index|key, collection).\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Collection\n   * @param {Array|Object} collection The collection to iterate over.\n   * @param {Function} [iteratee=_.identity]\n   *  The function invoked per iteration.\n   * @returns {Array} Returns the new flattened array.\n   * @example\n   *\n   * function duplicate(n) {\n   *   return [n, n];\n   * }\n   *\n   * _.flatMap([1, 2], duplicate);\n   * // => [1, 1, 2, 2]\n   */\n\n\n  function flatMap(collection, iteratee) {\n    return baseFlatten(map(collection, iteratee), 1);\n  }\n  /**\n   * Creates an array of values by running each element in `collection` thru\n   * `iteratee`. The iteratee is invoked with three arguments:\n   * (value, index|key, collection).\n   *\n   * Many lodash methods are guarded to work as iteratees for methods like\n   * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n   *\n   * The guarded methods are:\n   * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n   * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n   * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n   * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n   *\n   * @static\n   * @memberOf _\n   * @since 0.1.0\n   * @category Collection\n   * @param {Array|Object} collection The collection to iterate over.\n   * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n   * @returns {Array} Returns the new mapped array.\n   * @example\n   *\n   * function square(n) {\n   *   return n * n;\n   * }\n   *\n   * _.map([4, 8], square);\n   * // => [16, 64]\n   *\n   * _.map({ 'a': 4, 'b': 8 }, square);\n   * // => [16, 64] (iteration order is not guaranteed)\n   *\n   * var users = [\n   *   { 'user': 'barney' },\n   *   { 'user': 'fred' }\n   * ];\n   *\n   * // The `_.property` iteratee shorthand.\n   * _.map(users, 'user');\n   * // => ['barney', 'fred']\n   */\n\n\n  function map(collection, iteratee) {\n    var func = isArray(collection) ? arrayMap : baseMap;\n    return func(collection, baseIteratee(iteratee, 3));\n  }\n  /**\n   * Creates a function that memoizes the result of `func`. If `resolver` is\n   * provided, it determines the cache key for storing the result based on the\n   * arguments provided to the memoized function. By default, the first argument\n   * provided to the memoized function is used as the map cache key. The `func`\n   * is invoked with the `this` binding of the memoized function.\n   *\n   * **Note:** The cache is exposed as the `cache` property on the memoized\n   * function. Its creation may be customized by replacing the `_.memoize.Cache`\n   * constructor with one whose instances implement the\n   * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n   * method interface of `delete`, `get`, `has`, and `set`.\n   *\n   * @static\n   * @memberOf _\n   * @since 0.1.0\n   * @category Function\n   * @param {Function} func The function to have its output memoized.\n   * @param {Function} [resolver] The function to resolve the cache key.\n   * @returns {Function} Returns the new memoized function.\n   * @example\n   *\n   * var object = { 'a': 1, 'b': 2 };\n   * var other = { 'c': 3, 'd': 4 };\n   *\n   * var values = _.memoize(_.values);\n   * values(object);\n   * // => [1, 2]\n   *\n   * values(other);\n   * // => [3, 4]\n   *\n   * object.a = 2;\n   * values(object);\n   * // => [1, 2]\n   *\n   * // Modify the result cache.\n   * values.cache.set(object, ['a', 'b']);\n   * values(object);\n   * // => ['a', 'b']\n   *\n   * // Replace `_.memoize.Cache`.\n   * _.memoize.Cache = WeakMap;\n   */\n\n\n  function memoize(func, resolver) {\n    if (typeof func != 'function' || resolver && typeof resolver != 'function') {\n      throw new TypeError(FUNC_ERROR_TEXT);\n    }\n\n    var memoized = function () {\n      var args = arguments,\n          key = resolver ? resolver.apply(this, args) : args[0],\n          cache = memoized.cache;\n\n      if (cache.has(key)) {\n        return cache.get(key);\n      }\n\n      var result = func.apply(this, args);\n      memoized.cache = cache.set(key, result);\n      return result;\n    };\n\n    memoized.cache = new (memoize.Cache || MapCache)();\n    return memoized;\n  } // Assign cache to `_.memoize`.\n\n\n  memoize.Cache = MapCache;\n  /**\n   * Performs a\n   * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n   * comparison between two values to determine if they are equivalent.\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Lang\n   * @param {*} value The value to compare.\n   * @param {*} other The other value to compare.\n   * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n   * @example\n   *\n   * var object = { 'a': 1 };\n   * var other = { 'a': 1 };\n   *\n   * _.eq(object, object);\n   * // => true\n   *\n   * _.eq(object, other);\n   * // => false\n   *\n   * _.eq('a', 'a');\n   * // => true\n   *\n   * _.eq('a', Object('a'));\n   * // => false\n   *\n   * _.eq(NaN, NaN);\n   * // => true\n   */\n\n  function eq(value, other) {\n    return value === other || value !== value && other !== other;\n  }\n  /**\n   * Checks if `value` is likely an `arguments` object.\n   *\n   * @static\n   * @memberOf _\n   * @since 0.1.0\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n   *  else `false`.\n   * @example\n   *\n   * _.isArguments(function() { return arguments; }());\n   * // => true\n   *\n   * _.isArguments([1, 2, 3]);\n   * // => false\n   */\n\n\n  function isArguments(value) {\n    // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n    return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') && (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n  }\n  /**\n   * Checks if `value` is classified as an `Array` object.\n   *\n   * @static\n   * @memberOf _\n   * @since 0.1.0\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n   * @example\n   *\n   * _.isArray([1, 2, 3]);\n   * // => true\n   *\n   * _.isArray(document.body.children);\n   * // => false\n   *\n   * _.isArray('abc');\n   * // => false\n   *\n   * _.isArray(_.noop);\n   * // => false\n   */\n\n\n  var isArray = Array.isArray;\n  /**\n   * Checks if `value` is array-like. A value is considered array-like if it's\n   * not a function and has a `value.length` that's an integer greater than or\n   * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n   * @example\n   *\n   * _.isArrayLike([1, 2, 3]);\n   * // => true\n   *\n   * _.isArrayLike(document.body.children);\n   * // => true\n   *\n   * _.isArrayLike('abc');\n   * // => true\n   *\n   * _.isArrayLike(_.noop);\n   * // => false\n   */\n\n  function isArrayLike(value) {\n    return value != null && isLength(value.length) && !isFunction(value);\n  }\n  /**\n   * This method is like `_.isArrayLike` except that it also checks if `value`\n   * is an object.\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is an array-like object,\n   *  else `false`.\n   * @example\n   *\n   * _.isArrayLikeObject([1, 2, 3]);\n   * // => true\n   *\n   * _.isArrayLikeObject(document.body.children);\n   * // => true\n   *\n   * _.isArrayLikeObject('abc');\n   * // => false\n   *\n   * _.isArrayLikeObject(_.noop);\n   * // => false\n   */\n\n\n  function isArrayLikeObject(value) {\n    return isObjectLike(value) && isArrayLike(value);\n  }\n  /**\n   * Checks if `value` is classified as a `Function` object.\n   *\n   * @static\n   * @memberOf _\n   * @since 0.1.0\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n   * @example\n   *\n   * _.isFunction(_);\n   * // => true\n   *\n   * _.isFunction(/abc/);\n   * // => false\n   */\n\n\n  function isFunction(value) {\n    // The use of `Object#toString` avoids issues with the `typeof` operator\n    // in Safari 8-9 which returns 'object' for typed array and other constructors.\n    var tag = isObject(value) ? objectToString.call(value) : '';\n    return tag == funcTag || tag == genTag;\n  }\n  /**\n   * Checks if `value` is a valid array-like length.\n   *\n   * **Note:** This method is loosely based on\n   * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n   * @example\n   *\n   * _.isLength(3);\n   * // => true\n   *\n   * _.isLength(Number.MIN_VALUE);\n   * // => false\n   *\n   * _.isLength(Infinity);\n   * // => false\n   *\n   * _.isLength('3');\n   * // => false\n   */\n\n\n  function isLength(value) {\n    return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n  }\n  /**\n   * Checks if `value` is the\n   * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n   * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n   *\n   * @static\n   * @memberOf _\n   * @since 0.1.0\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n   * @example\n   *\n   * _.isObject({});\n   * // => true\n   *\n   * _.isObject([1, 2, 3]);\n   * // => true\n   *\n   * _.isObject(_.noop);\n   * // => true\n   *\n   * _.isObject(null);\n   * // => false\n   */\n\n\n  function isObject(value) {\n    var type = typeof value;\n    return !!value && (type == 'object' || type == 'function');\n  }\n  /**\n   * Checks if `value` is object-like. A value is object-like if it's not `null`\n   * and has a `typeof` result of \"object\".\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n   * @example\n   *\n   * _.isObjectLike({});\n   * // => true\n   *\n   * _.isObjectLike([1, 2, 3]);\n   * // => true\n   *\n   * _.isObjectLike(_.noop);\n   * // => false\n   *\n   * _.isObjectLike(null);\n   * // => false\n   */\n\n\n  function isObjectLike(value) {\n    return !!value && typeof value == 'object';\n  }\n  /**\n   * Checks if `value` is classified as a `Symbol` primitive or object.\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n   * @example\n   *\n   * _.isSymbol(Symbol.iterator);\n   * // => true\n   *\n   * _.isSymbol('abc');\n   * // => false\n   */\n\n\n  function isSymbol(value) {\n    return typeof value == 'symbol' || isObjectLike(value) && objectToString.call(value) == symbolTag;\n  }\n  /**\n   * Checks if `value` is classified as a typed array.\n   *\n   * @static\n   * @memberOf _\n   * @since 3.0.0\n   * @category Lang\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n   * @example\n   *\n   * _.isTypedArray(new Uint8Array);\n   * // => true\n   *\n   * _.isTypedArray([]);\n   * // => false\n   */\n\n\n  var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n  /**\n   * Converts `value` to a string. An empty string is returned for `null`\n   * and `undefined` values. The sign of `-0` is preserved.\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Lang\n   * @param {*} value The value to process.\n   * @returns {string} Returns the string.\n   * @example\n   *\n   * _.toString(null);\n   * // => ''\n   *\n   * _.toString(-0);\n   * // => '-0'\n   *\n   * _.toString([1, 2, 3]);\n   * // => '1,2,3'\n   */\n\n  function toString(value) {\n    return value == null ? '' : baseToString(value);\n  }\n  /**\n   * Gets the value at `path` of `object`. If the resolved value is\n   * `undefined`, the `defaultValue` is returned in its place.\n   *\n   * @static\n   * @memberOf _\n   * @since 3.7.0\n   * @category Object\n   * @param {Object} object The object to query.\n   * @param {Array|string} path The path of the property to get.\n   * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n   * @returns {*} Returns the resolved value.\n   * @example\n   *\n   * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n   *\n   * _.get(object, 'a[0].b.c');\n   * // => 3\n   *\n   * _.get(object, ['a', '0', 'b', 'c']);\n   * // => 3\n   *\n   * _.get(object, 'a.b.c', 'default');\n   * // => 'default'\n   */\n\n\n  function get(object, path, defaultValue) {\n    var result = object == null ? undefined : baseGet(object, path);\n    return result === undefined ? defaultValue : result;\n  }\n  /**\n   * Checks if `path` is a direct or inherited property of `object`.\n   *\n   * @static\n   * @memberOf _\n   * @since 4.0.0\n   * @category Object\n   * @param {Object} object The object to query.\n   * @param {Array|string} path The path to check.\n   * @returns {boolean} Returns `true` if `path` exists, else `false`.\n   * @example\n   *\n   * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n   *\n   * _.hasIn(object, 'a');\n   * // => true\n   *\n   * _.hasIn(object, 'a.b');\n   * // => true\n   *\n   * _.hasIn(object, ['a', 'b']);\n   * // => true\n   *\n   * _.hasIn(object, 'b');\n   * // => false\n   */\n\n\n  function hasIn(object, path) {\n    return object != null && hasPath(object, path, baseHasIn);\n  }\n  /**\n   * Creates an array of the own enumerable property names of `object`.\n   *\n   * **Note:** Non-object values are coerced to objects. See the\n   * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n   * for more details.\n   *\n   * @static\n   * @since 0.1.0\n   * @memberOf _\n   * @category Object\n   * @param {Object} object The object to query.\n   * @returns {Array} Returns the array of property names.\n   * @example\n   *\n   * function Foo() {\n   *   this.a = 1;\n   *   this.b = 2;\n   * }\n   *\n   * Foo.prototype.c = 3;\n   *\n   * _.keys(new Foo);\n   * // => ['a', 'b'] (iteration order is not guaranteed)\n   *\n   * _.keys('hi');\n   * // => ['0', '1']\n   */\n\n\n  function keys(object) {\n    return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n  }\n  /**\n   * This method returns the first argument it receives.\n   *\n   * @static\n   * @since 0.1.0\n   * @memberOf _\n   * @category Util\n   * @param {*} value Any value.\n   * @returns {*} Returns `value`.\n   * @example\n   *\n   * var object = { 'a': 1 };\n   *\n   * console.log(_.identity(object) === object);\n   * // => true\n   */\n\n\n  function identity(value) {\n    return value;\n  }\n  /**\n   * Creates a function that returns the value at `path` of a given object.\n   *\n   * @static\n   * @memberOf _\n   * @since 2.4.0\n   * @category Util\n   * @param {Array|string} path The path of the property to get.\n   * @returns {Function} Returns the new accessor function.\n   * @example\n   *\n   * var objects = [\n   *   { 'a': { 'b': 2 } },\n   *   { 'a': { 'b': 1 } }\n   * ];\n   *\n   * _.map(objects, _.property('a.b'));\n   * // => [2, 1]\n   *\n   * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n   * // => [1, 2]\n   */\n\n\n  function property(path) {\n    return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n  }\n\n  module.exports = flatMap;\n});\n\nvar Subverse =\n/** @class */\nfunction () {\n  function Subverse(parent, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    this.particles = [];\n    this.particleForces = [];\n    this.subverses = [];\n    this.parent = parent;\n    this.options = options;\n  }\n\n  Subverse.prototype.createSubverse = function () {\n    var subverse = new Subverse(this, this.options);\n    this.subverses.push(subverse);\n    return subverse;\n  };\n\n  Subverse.prototype.removeSubverse = function (subverse) {\n    this.subverses = this.subverses.filter(function (s) {\n      return s !== subverse;\n    });\n  };\n\n  Subverse.prototype.addParticle = function (particle) {\n    this.particles.push(particle);\n  };\n\n  Subverse.prototype.removeParticle = function (particle) {\n    this.particles = this.particles.filter(function (p) {\n      return p !== particle;\n    });\n  };\n\n  Subverse.prototype.getParticles = function () {\n    return this.particles.concat(lodash_flatmap(this.subverses, function (subverse) {\n      return subverse.getParticles();\n    }));\n  };\n\n  Subverse.prototype.addParticleForce = function (particleForce) {\n    this.particleForces.push(particleForce);\n  };\n\n  Subverse.prototype.removeParticleForce = function (particleForce) {\n    this.particleForces = this.particleForces.filter(function (pf) {\n      return pf !== particleForce;\n    });\n  };\n\n  Subverse.prototype.getParticleForces = function () {\n    if (!this.parent) {\n      return this.particleForces;\n    }\n\n    return this.parent.getParticleForces().concat(this.particleForces);\n  };\n\n  Subverse.prototype.enforceBounds = function (particle, bounds) {\n    if (particle.position.x > bounds.right) {\n      particle.position.x = bounds.right;\n      particle.velocity.x *= -1;\n    } else if (particle.position.x < bounds.left) {\n      particle.position.x = bounds.left;\n      particle.velocity.x *= -1;\n    }\n\n    if (particle.position.y > bounds.bottom) {\n      particle.position.y = bounds.bottom;\n      particle.velocity.y *= -1;\n    } else if (particle.position.y < bounds.top) {\n      particle.position.y = bounds.top;\n      particle.velocity.y *= -1;\n    }\n  };\n\n  Subverse.prototype.applyForces = function (particle, particleForces) {\n    var forces = particleForces.map(function (particleForce) {\n      return particleForce(particle);\n    });\n    var netForce = Vector.sum(forces);\n    var acceleration = netForce.divideScalar(particle.mass);\n    particle.position.add(particle.velocity);\n    particle.velocity.add(acceleration);\n  };\n\n  Subverse.prototype.tick = function () {\n    var _this = this;\n\n    var particleForces = this.getParticleForces();\n    this.particles.forEach(function (particle) {\n      _this.applyForces(particle, particleForces);\n\n      if (_this.options.bounds) {\n        _this.enforceBounds(particle, _this.options.bounds);\n      }\n    });\n    this.subverses.forEach(function (subverse) {\n      return subverse.tick();\n    });\n  };\n\n  return Subverse;\n}();\n\nvar timing = {\n  linear: function (t) {\n    return t;\n  },\n  easeInQuad: function (t) {\n    return t * t;\n  },\n  easeOutQuad: function (t) {\n    return t * (2 - t);\n  },\n  easeInOutQuad: function (t) {\n    return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n  }\n};\nvar timing$1 = /*#__PURE__*/Object.freeze({\n  default: timing\n});\nvar UniverseState;\n\n(function (UniverseState) {\n  UniverseState[\"Creating\"] = \"Creating\";\n  UniverseState[\"Created\"] = \"Created\";\n  UniverseState[\"Dying\"] = \"Dying\";\n  UniverseState[\"Dead\"] = \"Dead\";\n})(UniverseState || (UniverseState = {}));\n\nvar Universe =\n/** @class */\nfunction (_super) {\n  __extends(Universe, _super);\n\n  function Universe(_a) {\n    var _b = _a === void 0 ? {} : _a,\n        bounds = _b.bounds,\n        _c = _b.frameRate,\n        frameRate = _c === void 0 ? 30 : _c,\n        _d = _b.creationDuration,\n        creationDuration = _d === void 0 ? 500 : _d,\n        _e = _b.deathDuration,\n        deathDuration = _e === void 0 ? 500 : _e,\n        _f = _b.creationTimingFn,\n        creationTimingFn = _f === void 0 ? timing.easeInQuad : _f,\n        _g = _b.deathTimingFn,\n        deathTimingFn = _g === void 0 ? timing.easeInQuad : _g,\n        onStateChange = _b.onStateChange;\n\n    var _this = _super.call(this, null, {\n      bounds: bounds\n    }) || this;\n\n    _this.health = 0;\n    _this.creationRate = 1;\n    _this.deathRate = 1;\n\n    _this.setFrameRate(frameRate);\n\n    _this.setCreationDuration(creationDuration);\n\n    _this.setDeathDuration(deathDuration);\n\n    _this.creationTimingFn = creationTimingFn;\n    _this.deathTimingFn = deathTimingFn;\n    _this.onStateChange = onStateChange;\n\n    _this.setState(UniverseState.Creating);\n\n    return _this;\n  }\n\n  Universe.prototype.setState = function (val) {\n    var _a, _b;\n\n    this.state = val;\n    (_b = (_a = this).onStateChange) === null || _b === void 0 ? void 0 : _b.call(_a, val, this);\n  };\n\n  Universe.prototype.applyGrowth = function (particle) {\n    particle.perceivedRadius = particle.radius * this.creationTimingFn(this.health);\n  };\n\n  Universe.prototype.applyDecay = function (particle) {\n    particle.perceivedRadius = particle.radius * this.deathTimingFn(this.health);\n  };\n\n  Universe.prototype.setCreationDuration = function (creationDuration) {\n    this.creationDuration = creationDuration;\n    this.creationRate = 1000 / (this.creationDuration * this.frameRate);\n  };\n\n  Universe.prototype.setDeathDuration = function (deathDuration) {\n    this.deathDuration = deathDuration;\n    this.deathRate = 1000 / (this.deathDuration * this.frameRate);\n  };\n\n  Universe.prototype.setFrameRate = function (frameRate) {\n    this.frameRate = frameRate;\n    this.creationRate = 1000 / (this.creationDuration * this.frameRate);\n    this.deathRate = 1000 / (this.deathDuration * this.frameRate);\n  };\n\n  Universe.prototype.setOnStateChange = function (onStateChange) {\n    this.onStateChange = onStateChange;\n  };\n\n  Universe.prototype.die = function () {\n    var _this = this;\n\n    this.setState(UniverseState.Dying);\n    return new Promise(function (resolve) {\n      _this.resolveDeath = resolve;\n    });\n  };\n\n  Universe.prototype.tick = function () {\n    var _this = this;\n\n    if (this.state === UniverseState.Creating) {\n      this.health = Math.min(this.health + this.creationRate, 1);\n      this.getParticles().forEach(function (particle) {\n        _this.applyGrowth(particle);\n      });\n\n      if (this.health === 1) {\n        this.setState(UniverseState.Created);\n      }\n    } else if (this.state === UniverseState.Dying) {\n      this.health = Math.max(this.health - this.deathRate, 0);\n      this.getParticles().forEach(function (particle) {\n        _this.applyDecay(particle);\n      });\n\n      if (this.health === 0) {\n        this.setState(UniverseState.Dead);\n        this.resolveDeath();\n      }\n    }\n\n    _super.prototype.tick.call(this);\n  };\n\n  return Universe;\n}(Subverse);\n\nvar Particle =\n/** @class */\nfunction () {\n  function Particle(_a) {\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.radius,\n        radius = _c === void 0 ? 1 : _c,\n        _d = _b.friction,\n        friction = _d === void 0 ? 10 : _d,\n        _e = _b.mass,\n        mass = _e === void 0 ? 100 : _e,\n        _f = _b.position,\n        position = _f === void 0 ? new Vector(0, 0) : _f,\n        _g = _b.velocity,\n        velocity = _g === void 0 ? new Vector(0, 0) : _g,\n        _h = _b.color,\n        color = _h === void 0 ? 'black' : _h,\n        _j = _b.growthRate,\n        growthRate = _j === void 0 ? .05 : _j,\n        _k = _b.decayRate,\n        decayRate = _k === void 0 ? .05 : _k;\n\n    this.perceivedRadius = 0;\n    this.radius = radius;\n    this.friction = friction;\n    this.mass = mass;\n    this.position = position;\n    this.velocity = velocity;\n    this.color = color;\n    this.growthRate = growthRate;\n    this.decayRate = decayRate;\n  }\n\n  return Particle;\n}();\n\nvar Renderer =\n/** @class */\nfunction () {\n  function Renderer() {}\n\n  return Renderer;\n}();\n\nfunction getImageData(src) {\n  var image = new Image();\n  image.crossOrigin = \"Anonymous\";\n  var p = new Promise(function (resolve, reject) {\n    image.onload = function () {\n      var canvas = document.createElement(\"canvas\");\n      canvas.width = image.width;\n      canvas.height = image.height;\n      var context = canvas.getContext(\"2d\");\n\n      if (!context) {\n        return reject(new Error('Could not get canvas context'));\n      }\n\n      context.drawImage(image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height);\n      var imageData = context.getImageData(0, 0, canvas.width, canvas.height).data;\n      context.clearRect(0, 0, canvas.width, canvas.height);\n      var pixels = [];\n      var i = 0;\n\n      while (i < imageData.length - 1) {\n        var x = i / 4 % canvas.width;\n        var y = Math.floor(i / 4 / canvas.width);\n\n        if (!pixels[y]) {\n          pixels[y] = [];\n        }\n\n        pixels[y][x] = {\n          r: imageData[i],\n          g: imageData[i + 1],\n          b: imageData[i + 2],\n          a: imageData[i + 3]\n        };\n        i += 4;\n      }\n\n      resolve(new Array2D(pixels));\n    };\n\n    image.onerror = reject;\n  });\n  image.src = src;\n  return p;\n}\n\nvar range = function (n) {\n  return __spread(Array(n).keys());\n};\n\nvar shuffle = function (array) {\n  var currentIndex = array.length,\n      temporaryValue,\n      randomIndex;\n\n  while (0 !== currentIndex) {\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n    temporaryValue = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temporaryValue;\n  }\n\n  return array;\n};\n\nvar groupBy = function (array, grouper) {\n  return array.reduce(function (groups, item) {\n    var key = grouper(item);\n\n    if (!groups[key]) {\n      groups[key] = [];\n    }\n\n    groups[key].push(item);\n    return groups;\n  }, {});\n};\n\nvar TwoPI = Math.PI * 2;\n\nvar getMousePosition = function (event) {\n  var canvas = event.target;\n  var rect = canvas.getBoundingClientRect();\n  return {\n    x: (event.clientX - rect.left) / (rect.right - rect.left) * canvas.width,\n    y: (event.clientY - rect.top) / (rect.bottom - rect.top) * canvas.height\n  };\n};\n\nvar getTouchPosition = function (event) {\n  var canvas = event.target;\n  var rect = canvas.getBoundingClientRect();\n  return {\n    x: (event.touches[0].clientX - rect.left) / (rect.right - rect.left) * canvas.width,\n    y: (event.touches[0].clientY - rect.top) / (rect.bottom - rect.top) * canvas.height\n  };\n};\n\nvar BrowserAnimator =\n/** @class */\nfunction () {\n  function BrowserAnimator(callback, fps) {\n    var _this = this;\n\n    if (fps === void 0) {\n      fps = 30;\n    }\n\n    this.setFps = function (fps) {\n      _this.delay = 1000 / fps;\n      _this.time = null;\n      _this.frame = -1;\n    };\n\n    this.start = function () {\n      if (!_this.rafId) {\n        _this.rafId = requestAnimationFrame(_this.loop);\n      }\n    };\n\n    this.stop = function () {\n      if (_this.rafId) {\n        cancelAnimationFrame(_this.rafId);\n        _this.rafId = null;\n        _this.time = null;\n        _this.frame = -1;\n      }\n    };\n\n    this.loop = function (timestamp) {\n      if (_this.time === null) {\n        _this.time = timestamp;\n      }\n\n      var seg = Math.floor((timestamp - _this.time) / _this.delay); // calc frame no.\n\n      if (seg > _this.frame) {\n        // moved to next frame?\n        _this.frame = seg; // update\n\n        _this.callback({\n          time: timestamp,\n          frame: _this.frame\n        });\n      }\n\n      _this.rafId = requestAnimationFrame(_this.loop);\n    };\n\n    this.delay = 1000 / fps;\n    this.time = null;\n    this.frame = -1;\n    this.callback = callback;\n  }\n\n  return BrowserAnimator;\n}();\n\nvar CanvasRenderer =\n/** @class */\nfunction (_super) {\n  __extends(CanvasRenderer, _super);\n\n  function CanvasRenderer(canvas) {\n    var _this = _super.call(this) || this;\n\n    _this.canvas = canvas;\n    return _this;\n  }\n\n  CanvasRenderer.prototype.context = function () {\n    return this.canvas.getContext('2d');\n  };\n\n  CanvasRenderer.prototype.height = function () {\n    return this.canvas.height;\n  };\n\n  CanvasRenderer.prototype.width = function () {\n    return this.canvas.width;\n  };\n\n  CanvasRenderer.prototype.clear = function () {\n    var _a;\n\n    (_a = this.context()) === null || _a === void 0 ? void 0 : _a.clearRect(0, 0, this.width(), this.height());\n  };\n\n  CanvasRenderer.prototype.drawParticles = function (particles, color) {\n    var context = this.context();\n\n    if (context) {\n      context.fillStyle = color;\n      context.beginPath();\n      particles.forEach(function (particle) {\n        context.moveTo(particle.position.x + particle.radius, particle.position.y);\n        context.arc(particle.position.x, particle.position.y, particle.perceivedRadius, 0, TwoPI);\n      });\n      context.fill();\n    }\n  };\n\n  CanvasRenderer.prototype.drawFrame = function (universe) {\n    var _this = this;\n\n    this.clear();\n    var particles = universe.getParticles();\n    var particlesByColor = groupBy(particles, function (particle) {\n      return particle.color;\n    });\n    Object.keys(particlesByColor).forEach(function (color) {\n      _this.drawParticles(particlesByColor[color], color);\n    });\n  };\n\n  return CanvasRenderer;\n}(Renderer);\n\nvar Simulator =\n/** @class */\nfunction () {\n  function Simulator(renderer, universe, _a) {\n    var _this = this;\n\n    if (universe === void 0) {\n      universe = null;\n    }\n\n    var _b = (_a === void 0 ? {} : _a).frameRate,\n        frameRate = _b === void 0 ? 30 : _b;\n    this.id = null;\n\n    this.start = function () {\n      _this.animator.start();\n    };\n\n    this.stop = function () {\n      _this.animator.stop();\n    };\n\n    this.loop = function () {\n      if (_this.universe) {\n        _this.renderer.drawFrame(_this.universe);\n\n        _this.universe.tick();\n      }\n    };\n\n    this.universe = universe;\n    this.renderer = renderer;\n    this.animator = new BrowserAnimator(this.loop, frameRate);\n  }\n\n  Simulator.prototype.setUniverse = function (universe) {\n    this.universe = universe;\n  };\n\n  return Simulator;\n}();\n\nfunction blackHole$$1(blackHoleX, blackHoleY, strength) {\n  if (strength === void 0) {\n    strength = 1;\n  }\n\n  return function (particle) {\n    var blackHolePosition = new Vector(blackHoleX, blackHoleY);\n    return blackHolePosition.subtract(particle.position).multiplyScalar(strength);\n  };\n}\n\nfunction disturbance$$1(x, y, strength) {\n  if (strength === void 0) {\n    strength = 1;\n  }\n\n  return function (particle) {\n    var holePosition = new Vector(x, y);\n    holePosition.subtract(particle.position).multiplyScalar(-1);\n    holePosition.divideScalar((holePosition.getMagnitude() ^ 12) / (strength + .001) + .01);\n    return holePosition;\n  };\n}\n\nfunction entropy$$1(n) {\n  return function () {\n    var randomForce = new Vector(Math.random() - 0.5, Math.random() - 0.5);\n    return randomForce.multiplyScalar(n);\n  };\n}\n\nvar friction$$1 = function (particle) {\n  var friction$$1 = Math.min(Math.max(particle.friction, 0), 1);\n\n  if (particle.velocity.getMagnitude() === 0) {\n    return new Vector(0, 0);\n  }\n\n  return particle.velocity.clone().multiplyScalar(-(friction$$1 * particle.mass));\n};\n\nvar forces = /*#__PURE__*/Object.freeze({\n  blackHole: blackHole$$1,\n  disturbance: disturbance$$1,\n  entropy: entropy$$1,\n  friction: friction$$1\n});\n\nvar PixelManager =\n/** @class */\nfunction () {\n  function PixelManager(options) {\n    var _this = this;\n\n    this.setScale = function (scale) {\n      _this.scale = scale;\n    };\n\n    this.setCanvasWidth = function (width) {\n      _this.canvasWidth = width;\n    };\n\n    this.setCanvasHeight = function (height) {\n      _this.canvasHeight = height;\n    };\n\n    this.getParticleForce = function () {\n      return function (particle) {\n        var pixelPosition = _this.getPixelPosition();\n\n        return blackHole$$1(pixelPosition.x, pixelPosition.y)(particle);\n      };\n    };\n\n    this.getPixelPosition = function () {\n      var x = _this.pixelX * _this.scale + _this.canvasWidth / 2 - _this.imageWidth * _this.scale / 2;\n      var y = _this.pixelY * _this.scale + _this.canvasHeight / 2 - _this.imageHeight * _this.scale / 2;\n      return new Vector(x, y);\n    };\n\n    this.pixelX = options.pixelX;\n    this.pixelY = options.pixelY;\n    this.scale = options.scale;\n    this.imageWidth = options.imageWidth;\n    this.imageHeight = options.imageHeight;\n    this.canvasWidth = options.canvasWidth;\n    this.canvasHeight = options.canvasHeight;\n  }\n\n  return PixelManager;\n}();\n\nvar Array2D =\n/** @class */\nfunction () {\n  function Array2D(array) {\n    this.array = array;\n    this.updateWidth();\n    this.updateHeight();\n  }\n\n  Array2D.prototype.updateWidth = function () {\n    this.width = Math.min.apply(Math, __spread(this.array.map(function (row) {\n      return row.length;\n    })));\n  };\n\n  Array2D.prototype.updateHeight = function () {\n    this.height = this.array.length;\n  };\n\n  Array2D.prototype.getHeight = function () {\n    return this.height;\n  };\n\n  Array2D.prototype.getWidth = function () {\n    return this.width;\n  };\n\n  Array2D.prototype.get = function (x, y) {\n    return this.array[y][x];\n  };\n\n  Array2D.prototype.set = function (x, y, value) {\n    if (!this.array[y]) {\n      this.array[y] = [];\n    }\n\n    this.array[y][x] = value;\n    this.updateWidth();\n    this.updateHeight();\n  };\n\n  Array2D.prototype.slice = function (_a, _b) {\n    var _c = __read(_a, 2),\n        xMin = _c[0],\n        xMax = _c[1];\n\n    var _d = __read(_b, 2),\n        yMin = _d[0],\n        yMax = _d[1];\n\n    return new Array2D(this.array.slice(yMin, yMax).map(function (row) {\n      return row.slice(xMin, xMax);\n    }));\n  };\n\n  Array2D.prototype.forEach = function (callback) {\n    this.array.forEach(function (row, y) {\n      row.forEach(function (item, x) {\n        callback(item, x, y);\n      });\n    });\n  };\n\n  return Array2D;\n}();\n\nvar createImageUniverse = function (_a) {\n  var url = _a.url,\n      maxParticles = _a.maxParticles,\n      particleOptions = _a.particleOptions,\n      scale = _a.scale,\n      canvasDimensions = _a.canvasDimensions,\n      creationTimingFn = _a.creationTimingFn,\n      deathTimingFn = _a.deathTimingFn,\n      creationDuration = _a.creationDuration,\n      deathDuration = _a.deathDuration,\n      onUniverseStateChange = _a.onUniverseStateChange;\n  return __awaiter(void 0, void 0, void 0, function () {\n    var image, imageHeight, imageWidth, numPixels, indexArray, selectedPixels, universe, pixelManagers, nextIndex, x, y, shouldCreateParticle, subverse, pixelManager, color, radius, friction, mass, position, velocity;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          return [4\n          /*yield*/\n          , getImageData(url)];\n\n        case 1:\n          image = _b.sent();\n          imageHeight = image.getHeight();\n          imageWidth = image.getWidth();\n          numPixels = imageHeight * imageWidth;\n          indexArray = shuffle(range(numPixels));\n          selectedPixels = 0;\n          universe = new Universe({\n            creationTimingFn: creationTimingFn,\n            deathTimingFn: deathTimingFn,\n            creationDuration: creationDuration,\n            deathDuration: deathDuration,\n            onStateChange: onUniverseStateChange\n          });\n          pixelManagers = [];\n          maxParticles = Math.min(numPixels, maxParticles);\n\n          while (selectedPixels < maxParticles && indexArray.length) {\n            nextIndex = indexArray.pop() || 0;\n            x = nextIndex % imageWidth;\n            y = Math.floor(nextIndex / imageWidth);\n            shouldCreateParticle = particleOptions.filter({\n              x: x,\n              y: y,\n              image: image\n            });\n\n            if (shouldCreateParticle) {\n              subverse = universe.createSubverse();\n              pixelManager = new PixelManager({\n                pixelX: x,\n                pixelY: y,\n                scale: scale,\n                imageHeight: image.getHeight(),\n                imageWidth: image.getWidth(),\n                canvasWidth: canvasDimensions.width,\n                canvasHeight: canvasDimensions.height\n              });\n              pixelManagers.push(pixelManager);\n              subverse.addParticleForce(pixelManager.getParticleForce());\n              color = particleOptions.color({\n                x: x,\n                y: y,\n                image: image\n              });\n              radius = particleOptions.radius({\n                x: x,\n                y: y,\n                image: image\n              });\n              friction = particleOptions.friction({\n                x: x,\n                y: y,\n                image: image\n              });\n              mass = particleOptions.mass({\n                x: x,\n                y: y,\n                image: image\n              });\n              position = particleOptions.initialPosition({\n                x: x,\n                y: y,\n                image: image,\n                finalPosition: pixelManager.getPixelPosition(),\n                canvasDimensions: canvasDimensions\n              });\n              velocity = particleOptions.initialVelocity({\n                x: x,\n                y: y,\n                image: image\n              });\n              subverse.addParticle(new Particle({\n                radius: radius,\n                mass: mass,\n                color: color,\n                friction: friction,\n                position: position,\n                velocity: velocity\n              }));\n              selectedPixels += 1;\n            }\n          }\n\n          return [2\n          /*return*/\n          , {\n            universe: universe,\n            pixelManagers: pixelManagers\n          }];\n      }\n    });\n  });\n};\n\nvar useTransientParticleForce = function (_a) {\n  var universe = _a.universe,\n      _b = _a.duration,\n      duration = _b === void 0 ? 100 : _b;\n\n  var _c = __read(useState(null), 2),\n      particleForce = _c[0],\n      setParticleForce = _c[1];\n\n  useEffect(function () {\n    // Reset before universe change\n    return function () {\n      setParticleForce(null);\n    };\n  }, [universe]);\n  useEffect(function () {\n    if (universe && particleForce) {\n      universe.addParticleForce(particleForce);\n      var timeoutId_1 = window.setTimeout(function () {\n        universe.removeParticleForce(particleForce);\n        setParticleForce(null);\n      }, duration);\n      return function () {\n        window.clearTimeout(timeoutId_1);\n        universe.removeParticleForce(particleForce);\n      };\n    }\n  }, [universe, particleForce, duration]);\n  return [particleForce, setParticleForce];\n};\n\nvar ImageState;\n\n(function (ImageState) {\n  ImageState[\"Loading\"] = \"Loading\";\n  ImageState[\"Loaded\"] = \"Loaded\";\n  ImageState[\"Error\"] = \"Error\";\n})(ImageState || (ImageState = {}));\n/**\r\n * Default particle options\r\n * @internal\r\n */\n\n\nvar defaultParticleOptions = {\n  filter: function () {\n    return true;\n  },\n  radius: function () {\n    return 1;\n  },\n  mass: function () {\n    return 50;\n  },\n  color: function () {\n    return 'white';\n  },\n  friction: function () {\n    return .15;\n  },\n  initialPosition: function (_a) {\n    var finalPosition = _a.finalPosition;\n    return finalPosition;\n  },\n  initialVelocity: function () {\n    return new Vector(0, 0);\n  }\n};\n\nvar ParticleImage = function (_a) {\n  var src = _a.src,\n      _b = _a.height,\n      height = _b === void 0 ? 400 : _b,\n      _c = _a.width,\n      width = _c === void 0 ? 400 : _c,\n      _d = _a.scale,\n      scale = _d === void 0 ? 1 : _d,\n      _e = _a.maxParticles,\n      maxParticles = _e === void 0 ? 5000 : _e,\n      _f = _a.entropy,\n      entropy = _f === void 0 ? 20 : _f,\n      _g = _a.backgroundColor,\n      backgroundColor = _g === void 0 ? '#222' : _g,\n      _h = _a.particleOptions,\n      particleOptions = _h === void 0 ? {} : _h,\n      mouseMoveForce = _a.mouseMoveForce,\n      touchMoveForce = _a.touchMoveForce,\n      mouseDownForce = _a.mouseDownForce,\n      _j = _a.mouseMoveForceDuration,\n      mouseMoveForceDuration = _j === void 0 ? 100 : _j,\n      _k = _a.touchMoveForceDuration,\n      touchMoveForceDuration = _k === void 0 ? 100 : _k,\n      _l = _a.mouseDownForceDuration,\n      mouseDownForceDuration = _l === void 0 ? 100 : _l,\n      creationTimingFn = _a.creationTimingFn,\n      creationDuration = _a.creationDuration,\n      deathTimingFn = _a.deathTimingFn,\n      deathDuration = _a.deathDuration,\n      onUniverseStateChange = _a.onUniverseStateChange,\n      onImageStateChange = _a.onImageStateChange,\n      _m = _a.style,\n      style = _m === void 0 ? {} : _m,\n      otherProps = __rest(_a, [\"src\", \"height\", \"width\", \"scale\", \"maxParticles\", \"entropy\", \"backgroundColor\", \"particleOptions\", \"mouseMoveForce\", \"touchMoveForce\", \"mouseDownForce\", \"mouseMoveForceDuration\", \"touchMoveForceDuration\", \"mouseDownForceDuration\", \"creationTimingFn\", \"creationDuration\", \"deathTimingFn\", \"deathDuration\", \"onUniverseStateChange\", \"onImageStateChange\", \"style\"]);\n\n  var _o = __read(useState(), 2),\n      canvas = _o[0],\n      setCanvas = _o[1];\n\n  var _p = __read(useState(), 2),\n      universe = _p[0],\n      setUniverse = _p[1];\n\n  var simulatorRef = useRef();\n  var entropyForceRef = useRef();\n\n  var _q = __read(useState([]), 2),\n      pixelManagers = _q[0],\n      setPixelManagers = _q[1];\n\n  var mergedParticleOptions = __assign(__assign({}, defaultParticleOptions), particleOptions);\n\n  useEffect(function () {\n    if (canvas) {\n      var renderer = new CanvasRenderer(canvas);\n      var simulator_1 = new Simulator(renderer);\n      simulatorRef.current = simulator_1;\n      simulator_1.start();\n      return function () {\n        return simulator_1.stop();\n      };\n    }\n  }, [canvas]);\n  useEffect(function () {\n    var _a, _b;\n\n    if (canvas) {\n      var canvasDimensions = {\n        width: canvas.width,\n        height: canvas.height\n      };\n      var death = (_a = universe) === null || _a === void 0 ? void 0 : _a.die();\n      var setUp = createImageUniverse({\n        url: src,\n        maxParticles: maxParticles,\n        particleOptions: mergedParticleOptions,\n        scale: scale,\n        canvasDimensions: canvasDimensions,\n        creationTimingFn: creationTimingFn,\n        creationDuration: creationDuration,\n        deathTimingFn: deathTimingFn,\n        deathDuration: deathDuration,\n        onUniverseStateChange: onUniverseStateChange\n      });\n      (_b = onImageStateChange) === null || _b === void 0 ? void 0 : _b(ImageState.Loading);\n      setUp.then(function () {\n        var _a;\n\n        (_a = onImageStateChange) === null || _a === void 0 ? void 0 : _a(ImageState.Loaded);\n      }).catch(function () {\n        var _a;\n\n        (_a = onImageStateChange) === null || _a === void 0 ? void 0 : _a(ImageState.Error);\n      });\n      Promise.all([setUp, death]).then(function (_a) {\n        var _b = __read(_a, 1),\n            _c = _b[0],\n            universe = _c.universe,\n            pixelManagers = _c.pixelManagers;\n\n        var _d;\n\n        setPixelManagers(pixelManagers);\n        universe.addParticleForce(friction$$1);\n        (_d = simulatorRef.current) === null || _d === void 0 ? void 0 : _d.setUniverse(universe);\n        setUniverse(universe);\n      }).catch(function () {// Eat it here, let the consumer handle it via onImageStateChange\n      });\n    }\n  }, [canvas, src]);\n  useEffect(function () {\n    var _a;\n\n    (_a = universe) === null || _a === void 0 ? void 0 : _a.setOnStateChange(onUniverseStateChange);\n  }, [universe, onUniverseStateChange]);\n  var updateScale = useCallback(lodash_throttle(function (scale) {\n    pixelManagers.forEach(function (pixelManager) {\n      pixelManager.setScale(scale);\n    });\n  }, 50), [pixelManagers]);\n  var updateWidth = useCallback(lodash_throttle(function (width) {\n    pixelManagers.forEach(function (pixelManager) {\n      pixelManager.setCanvasWidth(width);\n    });\n  }, 50), [pixelManagers]);\n  var updateHeight = useCallback(lodash_throttle(function (height) {\n    pixelManagers.forEach(function (pixelManager) {\n      pixelManager.setCanvasHeight(height);\n    });\n  }, 50), [pixelManagers]);\n  useEffect(function () {\n    updateScale(scale);\n  }, [scale, updateScale]);\n  useEffect(function () {\n    updateWidth(width);\n  }, [width, updateWidth]);\n  useEffect(function () {\n    updateHeight(height);\n  }, [height, updateHeight]);\n  useEffect(function () {\n    var _a;\n\n    var entropyForce = entropy$$1(entropy);\n    (_a = universe) === null || _a === void 0 ? void 0 : _a.addParticleForce(entropyForce);\n    entropyForceRef.current = entropyForce;\n    return function () {\n      var _a;\n\n      (_a = universe) === null || _a === void 0 ? void 0 : _a.removeParticleForce(entropyForce);\n    };\n  }, [entropy, canvas, universe]);\n\n  var _r = __read(useTransientParticleForce({\n    universe: universe,\n    duration: mouseMoveForceDuration\n  }), 2),\n      mouseMoveParticleForce = _r[0],\n      setMouseMoveParticleForce = _r[1];\n\n  var _s = __read(useTransientParticleForce({\n    universe: universe,\n    duration: touchMoveForceDuration\n  }), 2),\n      touchMoveParticleForce = _s[0],\n      setTouchMoveParticleForce = _s[1];\n\n  var _t = __read(useTransientParticleForce({\n    universe: universe,\n    duration: mouseDownForceDuration\n  }), 2),\n      mouseDownParticleForce = _t[0],\n      setMouseDownParticleForce = _t[1];\n\n  var handleMouseMove = function (e) {\n    var _a, _b;\n\n    if (mouseMoveForce) {\n      var position_1 = getMousePosition(e);\n      setMouseMoveParticleForce(function () {\n        return mouseMoveForce(position_1.x, position_1.y);\n      });\n    }\n\n    (_b = (_a = otherProps).onMouseMove) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n  };\n\n  var handleTouchMove = function (e) {\n    var _a, _b;\n\n    if (touchMoveForce) {\n      var position_2 = getTouchPosition(e);\n      setTouchMoveParticleForce(function () {\n        return touchMoveForce(position_2.x, position_2.y);\n      });\n    }\n\n    (_b = (_a = otherProps).onTouchMove) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n  };\n\n  var handleMouseDown = function (e) {\n    var _a, _b;\n\n    if (mouseDownForce) {\n      var position_3 = getMousePosition(e);\n      setMouseDownParticleForce(function () {\n        return mouseDownForce(position_3.x, position_3.y);\n      });\n    }\n\n    (_b = (_a = otherProps).onMouseDown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n  };\n\n  return React.createElement(\"canvas\", __assign({}, otherProps, {\n    onMouseMove: handleMouseMove,\n    onTouchMove: handleTouchMove,\n    onMouseDown: handleMouseDown,\n    height: height,\n    width: width,\n    style: __assign({\n      backgroundColor: backgroundColor,\n      touchAction: 'none'\n    }, style),\n    ref: function (c) {\n      var _a;\n\n      if ((_a = c) === null || _a === void 0 ? void 0 : _a.getContext('2d')) {\n        setCanvas(c);\n      }\n    }\n  }));\n};\n\nexport default ParticleImage;\nexport { useTransientParticleForce, BrowserAnimator, getMousePosition, getTouchPosition, Universe, UniverseState, Subverse, Particle, Vector, Renderer, CanvasRenderer, Simulator, PixelManager, Array2D, forces, timing$1 as timing };","map":{"version":3,"sources":["../node_modules/tslib/tslib.es6.js","../node_modules/lodash.throttle/index.js","../src/universe/Vector.ts","../node_modules/lodash.flatmap/index.js","../src/universe/Subverse.ts","../src/universe/timing.ts","../src/universe/Universe.ts","../src/universe/Particle.ts","../src/universe/Renderer.ts","../src/utils.ts","../src/universe/CanvasRenderer.ts","../src/universe/Simulator.ts","../src/universe/forces.ts","../src/universe/PixelManager.ts","../src/universe/Array2D.ts","../src/ParticleImage/createImageUniverse.ts","../src/ParticleImage/useTransientParticleForce.ts","../src/types.ts","../src/ParticleImage/ParticleImage.tsx"],"names":["global","flatMap","blackHole","disturbance","entropy","friction","forces.blackHole","forces.friction","throttle","forces.entropy"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = throttle;\n","\nclass Vector {\n\n    x: number;\n    y: number;\n\n    constructor(x = 0, y = 0) {\n      this.x = x;\n      this.y = y;\n    }\n  \n    add(vector: Vector): Vector {\n      this.x += vector.x;\n      this.y += vector.y;\n      return this;\n    }\n  \n    subtract(vector: Vector): Vector {\n      this.x -= vector.x;\n      this.y -= vector.y;\n      return this;\n    }\n  \n    addScalar(scalar: number): Vector {\n      this.x += scalar;\n      this.y += scalar;\n      return this;\n    }\n  \n    divideScalar(scalar: number): Vector {\n      this.x = this.x / scalar;\n      this.y = this.y / scalar;\n      return this;\n    }\n  \n    multiplyScalar(scalar: number): Vector {\n      this.x = this.x * scalar;\n      this.y = this.y * scalar;\n      return this;\n    }\n  \n    getMagnitude(): number {\n      return Math.sqrt(this.x * this.x + this.y * this.y);\n    }\n  \n    getAngle(): number {\n      return Math.atan2(this.y, this.x);\n    }\n\n    clone(): Vector {\n      return new Vector(this.x, this.y)\n    } \n\n    toUnit(): Vector {\n      const magnitude = this.getMagnitude() \n      if (magnitude) {\n        return this.clone().divideScalar(magnitude)\n      }\n      return this.clone()\n    } \n  \n    static from(angle: number, magnitude: number): Vector {\n      return new Vector(magnitude * Math.cos(angle), magnitude * Math.sin(angle));\n    }\n  \n    static sum(vectors: Vector[]): Vector {\n      let v = new Vector(0, 0);\n      vectors.forEach(vector => {\n        v.add(vector);\n      });\n      return v;\n    }\n  }\n\n  export default Vector;","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for comparison styles. */\nvar UNORDERED_COMPARE_FLAG = 1,\n    PARTIAL_COMPARE_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values ? values.length : 0;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {boolean} [bitmask] The bitmask of comparison flags.\n *  The bitmask may be composed of the following flags:\n *     1 - Unordered comparison\n *     2 - Partial comparison\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, customizer, bitmask, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, baseIsEqual, customizer, bitmask, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {number} [bitmask] The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, equalFunc, customizer, bitmask, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = arrayTag,\n      othTag = arrayTag;\n\n  if (!objIsArr) {\n    objTag = getTag(object);\n    objTag = objTag == argsTag ? objectTag : objTag;\n  }\n  if (!othIsArr) {\n    othTag = getTag(other);\n    othTag = othTag == argsTag ? objectTag : othTag;\n  }\n  var objIsObj = objTag == objectTag && !isHostObject(object),\n      othIsObj = othTag == objectTag && !isHostObject(other),\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, equalFunc, customizer, bitmask, stack)\n      : equalByTag(object, other, objTag, equalFunc, customizer, bitmask, stack);\n  }\n  if (!(bitmask & PARTIAL_COMPARE_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, customizer, bitmask, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, equalFunc, customizer, bitmask, stack);\n}\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, customizer, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[objectToString.call(value)];\n}\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, undefined, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG);\n  };\n}\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\n/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, equalFunc, customizer, bitmask, stack) {\n  var isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & UNORDERED_COMPARE_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!seen.has(othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, customizer, bitmask, stack))) {\n              return seen.add(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, customizer, bitmask, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, equalFunc, customizer, bitmask, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & PARTIAL_COMPARE_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= UNORDERED_COMPARE_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), equalFunc, customizer, bitmask, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Function} customizer The function to customize comparisons.\n * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`\n *  for more details.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, equalFunc, customizer, bitmask, stack) {\n  var isPartial = bitmask & PARTIAL_COMPARE_FLAG,\n      objProps = keys(object),\n      objLength = objProps.length,\n      othProps = keys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, customizer, bitmask, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var result,\n      index = -1,\n      length = path.length;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result) {\n    return result;\n  }\n  var length = object ? object.length : 0;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\n/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a flattened array of values by running each element in `collection`\n * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n * with three arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity]\n *  The function invoked per iteration.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * function duplicate(n) {\n *   return [n, n];\n * }\n *\n * _.flatMap([1, 2], duplicate);\n * // => [1, 1, 2, 2]\n */\nfunction flatMap(collection, iteratee) {\n  return baseFlatten(map(collection, iteratee), 1);\n}\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = flatMap;\n","import Particle from './Particle'\nimport ParticleForce from './ParticleForce'\nimport Vector from './Vector'\nimport { Bounds, Nullable } from '../types'\nimport flatMap from 'lodash.flatmap'\n\nexport interface SubverseOptions {\n    bounds?: Bounds\n}\n\nclass Subverse {\n    private particles: Particle[] = []\n    private particleForces: ParticleForce[] = []\n    private parent: Nullable<Subverse>\n    private options: SubverseOptions\n    private subverses: Subverse[] = []\n\n    constructor(parent: Nullable<Subverse>, options: SubverseOptions = {}) {\n        this.parent = parent\n        this.options = options\n    }\n\n    createSubverse(): Subverse {\n        let subverse = new Subverse(this, this.options)\n        this.subverses.push(subverse)\n        return subverse\n    }\n\n    removeSubverse(subverse: Subverse) {\n        this.subverses = this.subverses.filter(s => s !== subverse)\n    }\n\n    addParticle(particle: Particle) {\n        this.particles.push(particle)\n    }\n\n    removeParticle(particle: Particle) {\n        this.particles = this.particles.filter(p => p !== particle)\n    }\n\n    getParticles(): Particle[] {\n        return this.particles.concat(\n            flatMap(\n                this.subverses,\n                subverse => subverse.getParticles()\n            )\n        )\n    }\n\n    addParticleForce(particleForce: ParticleForce) {\n        this.particleForces.push(particleForce)\n    }\n\n    removeParticleForce(particleForce: ParticleForce) {\n        this.particleForces = this.particleForces.filter(pf => pf !== particleForce)\n    }\n\n    getParticleForces(): ParticleForce[] {\n        if (!this.parent) {\n            return this.particleForces\n        }\n        return this.parent.getParticleForces().concat(this.particleForces)\n    }\n\n    private enforceBounds(particle: Particle, bounds: Bounds) {\n        if (particle.position.x > bounds.right) {\n          particle.position.x = bounds.right;\n          particle.velocity.x *= -1;\n        } else if (particle.position.x < bounds.left) {\n          particle.position.x = bounds.left;\n          particle.velocity.x *= -1;\n        }\n        if (particle.position.y > bounds.bottom) {\n          particle.position.y = bounds.bottom;\n          particle.velocity.y *= -1;\n        } else if (particle.position.y < bounds.top) {\n          particle.position.y = bounds.top;\n          particle.velocity.y *= -1;\n        }\n      }\n\n    private applyForces(particle: Particle, particleForces: ParticleForce[]) {\n        const forces: Vector[] = particleForces.map(particleForce => particleForce(particle))\n        const netForce: Vector = Vector.sum(forces)\n        const acceleration: Vector = netForce.divideScalar(particle.mass)\n        particle.position.add(particle.velocity)\n        particle.velocity.add(acceleration)\n    }\n\n    tick() {\n        const particleForces = this.getParticleForces()\n        this.particles.forEach((particle) => {\n            this.applyForces(particle, particleForces)\n            if (this.options.bounds) {\n                this.enforceBounds(particle, this.options.bounds)\n            }\n        })\n        this.subverses.forEach(subverse => subverse.tick())\n    }\n}\n\nexport default Subverse","export type TimingFunction = (t: number) => number\n\ntype TimingFunctions = {\n  [key: string]: TimingFunction\n}\n\nconst timing: TimingFunctions = {\n    linear: (t) => t,\n    easeInQuad: (t) => t*t,\n    easeOutQuad: t => t*(2-t),\n    easeInOutQuad: t => t<.5 ? 2*t*t : -1+(4-2*t)*t\n  }\n\nexport default timing","import Subverse from './Subverse'\nimport Particle from './Particle'\nimport { Bounds, Optional } from '../types'\nimport timing, { TimingFunction } from './timing'\n\nexport interface UniverseOptions {\n    bounds?: Bounds;\n    frameRate?: number;\n    creationDuration?: number;\n    deathDuration?: number;\n    creationTimingFn?: TimingFunction;\n    deathTimingFn?: TimingFunction;\n    onStateChange?: (state: UniverseState, universe: Universe) => void\n}\n\nexport enum UniverseState {\n    Creating = 'Creating',\n    Created = 'Created',\n    Dying = 'Dying',\n    Dead = 'Dead'\n}\n\nclass Universe extends Subverse {\n\n    private state: UniverseState\n    private resolveDeath: (value?: any) => void\n    private health: number = 0\n    private frameRate: number\n    private creationDuration: number\n    private creationRate: number = 1\n    private deathDuration: number\n    private deathRate: number = 1\n    private creationTimingFn: TimingFunction\n    private deathTimingFn: TimingFunction\n    private onStateChange?: (state: UniverseState, universe: Universe) => void\n\n    constructor({ bounds, frameRate = 30, creationDuration = 500, deathDuration = 500, creationTimingFn = timing.easeInQuad, deathTimingFn = timing.easeInQuad, onStateChange }: UniverseOptions = {}) {\n        super(null, { bounds })\n        this.setFrameRate(frameRate)\n        this.setCreationDuration(creationDuration)\n        this.setDeathDuration(deathDuration)\n        this.creationTimingFn = creationTimingFn\n        this.deathTimingFn = deathTimingFn\n        this.onStateChange = onStateChange\n        this.setState(UniverseState.Creating)\n    }\n\n    private setState(val: UniverseState) {\n        this.state = val\n        this.onStateChange?.(val, this)\n    }\n\n    private applyGrowth(particle: Particle) {\n        particle.perceivedRadius = particle.radius * this.creationTimingFn(this.health)\n    }\n\n    private applyDecay(particle: Particle) {\n        particle.perceivedRadius = particle.radius * this.deathTimingFn(this.health)\n    }\n\n    setCreationDuration(creationDuration: number) {\n        this.creationDuration = creationDuration\n        this.creationRate = 1000 / (this.creationDuration * this.frameRate)\n    }\n\n    setDeathDuration(deathDuration: number) {\n        this.deathDuration = deathDuration\n        this.deathRate = 1000 / (this.deathDuration * this.frameRate)\n    }\n\n    setFrameRate(frameRate: number) {\n        this.frameRate = frameRate\n        this.creationRate = 1000 / (this.creationDuration * this.frameRate)\n        this.deathRate = 1000 / (this.deathDuration * this.frameRate)\n    }\n\n    setOnStateChange(onStateChange: Optional<(state: UniverseState, universe: Universe) => void>) {\n        this.onStateChange = onStateChange\n    }\n\n    die(): Promise<void> {\n        this.setState(UniverseState.Dying)\n        return new Promise((resolve) => {\n            this.resolveDeath = resolve\n        })\n    }\n\n    tick() {\n        if (this.state === UniverseState.Creating) {\n            this.health = Math.min(this.health + this.creationRate, 1)\n            this.getParticles().forEach((particle) => {\n                this.applyGrowth(particle)\n            })\n            if (this.health === 1) {\n                this.setState(UniverseState.Created)\n            }\n        }\n        else if (this.state === UniverseState.Dying) {\n            this.health = Math.max(this.health - this.deathRate, 0)\n            this.getParticles().forEach((particle) => {\n                this.applyDecay(particle)\n            })\n            if (this.health === 0) {\n                this.setState(UniverseState.Dead)\n                this.resolveDeath()\n            }\n        }\n        super.tick()\n    }\n}\n\nexport default Universe","import Vector from './Vector'\n\nclass Particle {\n    radius: number;\n    perceivedRadius: number = 0;\n    friction: number;\n    mass: number;\n    position: Vector;\n    velocity: Vector;\n    color: string;\n    growthRate: number;\n    decayRate: number;\n    \n    constructor({\n        radius = 1,\n        friction = 10,\n        mass = 100,\n        position = new Vector(0, 0),\n        velocity = new Vector(0, 0),\n        color = 'black',\n        growthRate = .05,\n        decayRate = .05\n    } = {}) {\n        this.radius = radius\n        this.friction = friction\n        this.mass = mass\n        this.position = position\n        this.velocity = velocity\n        this.color = color\n        this.growthRate = growthRate\n        this.decayRate = decayRate\n    }\n  }\n  \n\nexport default Particle","\nimport Universe from './Universe'\n\nabstract class Renderer {\n    abstract drawFrame(universe: Universe): void\n}\n\nexport default Renderer","import { Array2D } from './universe'\nimport React from 'react'\n\nexport type RGBA = {\n    r: number\n    g: number\n    b: number\n    a: number\n}\n\nexport function getImageData(src: string) {\n    var image = new Image();\n    image.crossOrigin = \"Anonymous\";\n    let p = new Promise<Array2D<RGBA>>((resolve, reject) => {\n      image.onload = function() {\n        let canvas = document.createElement(\"canvas\");\n        canvas.width = image.width\n        canvas.height = image.height\n  \n        let context = canvas.getContext(\"2d\");\n        if (!context) {\n            return reject(new Error('Could not get canvas context')) \n        }\n        context.drawImage(image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height);\n  \n        let imageData = context.getImageData(0, 0, canvas.width, canvas.height)\n            .data;\n    \n        context.clearRect(0, 0, canvas.width, canvas.height);\n  \n        let pixels: RGBA[][] = [];\n        let i = 0;\n        while (i < imageData.length - 1) {\n          let x = (i / 4) % canvas.width;\n          let y = Math.floor(i / 4 / canvas.width);\n          if (!pixels[y]) {\n              pixels[y] = []\n          }\n          pixels[y][x] = {\n            r: imageData[i],\n            g: imageData[i + 1],\n            b: imageData[i + 2],\n            a: imageData[i + 3]\n          }\n          i += 4;\n        }\n        resolve(new Array2D(pixels));\n      };\n      image.onerror = reject;\n    });\n    image.src = src;\n    return p;\n  }\n\n  export const range = (n: number) => [...Array(n).keys()]\n\n  export const shuffle = <T>(array: Array<T>) => {\n    let currentIndex = array.length, temporaryValue, randomIndex;\n  \n    while (0 !== currentIndex) {\n  \n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex -= 1;\n  \n      temporaryValue = array[currentIndex];\n      array[currentIndex] = array[randomIndex];\n      array[randomIndex] = temporaryValue;\n    }\n  \n    return array;\n  }\n\n  export const groupBy = <T>(array: Array<T>, grouper: (item: T) => string): {[key: string]: T[]} => {\n    return array.reduce((groups, item) => {\n      const key = grouper(item)\n      if (!groups[key]) {\n        groups[key] = []\n      }\n      groups[key].push(item)\n      return groups\n    }, {})\n  }\n\n  export const TwoPI = Math.PI * 2;\n\n  export const getMousePosition = (event: React.MouseEvent<HTMLCanvasElement, MouseEvent>) => {\n    const canvas = event.target as HTMLCanvasElement;\n    var rect = canvas.getBoundingClientRect();\n    return {\n        x: (event.clientX - rect.left) / (rect.right - rect.left) * canvas.width,\n        y: (event.clientY - rect.top) / (rect.bottom - rect.top) * canvas.height\n    };\n}\n\nexport const getTouchPosition = (event: React.TouchEvent<HTMLCanvasElement>) => {\n  const canvas = event.target as HTMLCanvasElement;\n  var rect = canvas.getBoundingClientRect();\n  return {\n      x: (event.touches[0].clientX - rect.left) / (rect.right - rect.left) * canvas.width,\n      y: (event.touches[0].clientY - rect.top) / (rect.bottom - rect.top) * canvas.height\n  };\n}\n\n\nexport class BrowserAnimator {\n\n  callback: Function\n  delay: number\n  frame: number\n  time: number | null\n  rafId: number | null\n\n  constructor(callback: Function, fps: number = 30) {\n    this.delay = 1000 / fps                  \n    this.time = null                                 \n    this.frame = -1\n    this.callback = callback\n  }\n\n  setFps = (fps: number) => {\n    this.delay = 1000 / fps\n    this.time = null\n    this.frame = -1\n  }\n\n  start = () => {\n    if (!this.rafId) {\n        this.rafId = requestAnimationFrame(this.loop);\n    }\n  }\n\n  stop = () => {\n    if (this.rafId) {\n        cancelAnimationFrame(this.rafId);\n        this.rafId = null\n        this.time = null;\n        this.frame = -1;\n    }\n  }\n\n  private loop = (timestamp) => {\n        if (this.time === null) {\n          this.time = timestamp;   \n        }\n        var seg = Math.floor((timestamp - (this.time as number)) / this.delay); // calc frame no.\n        if (seg > this.frame) {                                // moved to next frame?\n            this.frame = seg;                                  // update\n            this.callback({                                    // callback function\n                time: timestamp,\n                frame: this.frame\n            })\n        }\n        this.rafId = requestAnimationFrame(this.loop)\n    }\n}\n","\nimport Universe from './Universe'\nimport Particle from './Particle'\nimport Renderer from './Renderer'\nimport { Nullable } from '../types'\nimport { groupBy, TwoPI } from '../utils'\n\nclass CanvasRenderer extends Renderer {\n\n    canvas: HTMLCanvasElement\n\n    constructor(canvas: HTMLCanvasElement) {\n      super()\n      this.canvas = canvas;\n    }\n\n    private context(): Nullable<CanvasRenderingContext2D> {\n        return this.canvas.getContext('2d')\n    }\n  \n    private height() {\n      return this.canvas.height;\n    }\n  \n    private width() {\n      return this.canvas.width;\n    }\n  \n    private clear() {\n      this.context()?.clearRect(0, 0, this.width(), this.height());\n    }\n  \n    private drawParticles(particles: Particle[], color: string) {\n      const context = this.context()\n      if (context) {\n        context.fillStyle = color;\n        context.beginPath();\n        particles.forEach((particle) => {\n          context.moveTo( particle.position.x + particle.radius, particle.position.y );\n          context.arc(particle.position.x, particle.position.y, particle.perceivedRadius, 0, TwoPI );\n        })\n        context.fill();\n      }\n    }\n\n    drawFrame(universe: Universe) {\n      this.clear()\n      const particles = universe.getParticles()\n      const particlesByColor = groupBy(particles, (particle) => particle.color)\n      Object.keys(particlesByColor).forEach((color) => {\n        this.drawParticles(particlesByColor[color], color)\n      })\n    }\n  }\n\n  export default CanvasRenderer;","import Universe from './Universe'\nimport Renderer from './Renderer'\nimport { BrowserAnimator } from '../utils'\nimport { Nullable } from '../types'\n\nexport interface SimulatorOptions {\n    frameRate?: number;\n}\n\nclass Simulator {\n\n    universe: Nullable<Universe>;\n    renderer: Renderer;\n    animator: BrowserAnimator;\n    id: Nullable<number> = null;\n\n    constructor(renderer: Renderer, universe: Nullable<Universe> = null, { frameRate = 30 }: SimulatorOptions = {}) {\n        this.universe = universe\n        this.renderer = renderer\n        this.animator = new BrowserAnimator(this.loop, frameRate)\n    }\n\n    setUniverse(universe: Nullable<Universe>) {\n        this.universe = universe\n    }\n\n    start = () => {\n        this.animator.start()\n    }\n\n    stop = () => {\n        this.animator.stop()\n    }\n\n    private loop = () => {\n        if (this.universe) {\n            this.renderer.drawFrame(this.universe)\n            this.universe.tick()\n        }\n    }\n    \n}\n\nexport default Simulator","\nimport { Particle, ParticleForce, Vector } from '../universe'\n\nfunction blackHole(blackHoleX: number, blackHoleY: number, strength: number = 1): ParticleForce {\n    return (particle: Particle) => {\n      let blackHolePosition = new Vector(blackHoleX, blackHoleY);\n      return blackHolePosition.subtract(particle.position).multiplyScalar(strength);\n    };\n  }\n\nfunction disturbance(x: number, y: number, strength: number = 1): ParticleForce {\n    return (particle: Particle) => {\n      let holePosition = new Vector(x, y);\n      holePosition.subtract(particle.position).multiplyScalar(-1)\n      holePosition.divideScalar((holePosition.getMagnitude()^12)/(strength + .001) + .01)\n      return holePosition\n    };\n}\n\nfunction entropy(n: number): ParticleForce {\n    return () => {\n        let randomForce = new Vector(Math.random() - 0.5, Math.random() - 0.5);\n        return randomForce.multiplyScalar(n);\n    };\n}\n\nconst friction: ParticleForce = (particle: Particle) => {\n    const friction = Math.min(Math.max(particle.friction, 0), 1)\n    if (particle.velocity.getMagnitude() === 0) {\n        return new Vector(0, 0)\n    }\n    return particle.velocity.clone().multiplyScalar(-(friction * particle.mass))\n};\n\nexport {\n    blackHole,\n    disturbance,\n    entropy,\n    friction\n}","import * as forces from \"./forces\";\nimport ParticleForce from \"./ParticleForce\";\nimport Particle from \"./Particle\";\nimport Vector from \"./Vector\";\n\ninterface PixelManagerOptions {\n    pixelX: number; \n    pixelY: number; \n    scale: number; \n    imageWidth: number; \n    imageHeight: number; \n    canvasWidth: number; \n    canvasHeight: number;\n}\n\nclass PixelManager {\n\n    pixelX: number; \n    pixelY: number; \n    scale: number; \n    imageWidth: number; \n    imageHeight: number; \n    canvasWidth: number; \n    canvasHeight: number;\n\n    constructor(options: PixelManagerOptions) {\n        this.pixelX = options.pixelX \n        this.pixelY = options.pixelY \n        this.scale = options.scale\n        this.imageWidth = options.imageWidth\n        this.imageHeight = options.imageHeight\n        this.canvasWidth = options.canvasWidth\n        this.canvasHeight = options.canvasHeight\n    }\n\n    setScale = (scale: number) => {\n        this.scale = scale\n    }\n\n    setCanvasWidth = (width: number) => {\n        this.canvasWidth = width\n    }\n\n    setCanvasHeight = (height: number) => {\n        this.canvasHeight = height\n    }\n\n    getParticleForce = (): ParticleForce => (particle: Particle) => {\n        const pixelPosition = this.getPixelPosition()\n        return forces.blackHole(pixelPosition.x, pixelPosition.y)(particle)\n    }\n\n    getPixelPosition = (): Vector => {\n        const x = this.pixelX * this.scale + (this.canvasWidth / 2) - (this.imageWidth * this.scale / 2);\n        const y = this.pixelY * this.scale + (this.canvasHeight / 2) - (this.imageHeight * this.scale / 2);\n        return new Vector(x, y)\n    }\n}\n\nexport default PixelManager","\ntype SliceRange = [number, number]\n\nclass Array2D<T> {\n\n    private array: Array<Array<T>>\n    private width: number;\n    private height: number;\n\n    constructor(array: Array<Array<T>>) {\n        this.array = array\n        this.updateWidth()\n        this.updateHeight()\n    }\n\n    private updateWidth(): void {\n        this.width = Math.min(...this.array.map(row => row.length))\n    }\n\n    private updateHeight(): void {\n        this.height = this.array.length\n    }\n\n    getHeight(): number {\n        return this.height\n    }\n\n    getWidth(): number {\n        return this.width\n    }\n\n    get(x: number, y: number): T {\n        return this.array[y][x]\n    }\n\n    set(x: number, y: number, value: T): void {\n        if (!this.array[y]) {\n            this.array[y] = []\n        }\n        this.array[y][x] = value\n        this.updateWidth()\n        this.updateHeight()\n    }\n\n    slice([xMin, xMax]: SliceRange, [yMin, yMax]: SliceRange): Array2D<T> {\n        return new Array2D(this.array.slice(yMin, yMax).map((row) => {\n            return row.slice(xMin, xMax)\n        }))\n    }\n\n\n    forEach(callback: (item: T, x: number, y: number) => void): void {\n        this.array.forEach((row: T[], y: number) => {\n            row.forEach((item: T, x: number) => {\n                callback(item, x, y)\n            })\n        })\n    }\n}\n\nexport default Array2D","import { ParticleOptions } from './ParticleImage'\nimport { TimingFunction } from '../universe/timing'\nimport { getImageData, shuffle, range } from '../utils'\nimport { Universe, UniverseState, PixelManager, Vector, Particle } from '../universe'\nimport { Dimensions } from '../types'\n\nexport interface ImageUniverseSetupResult {\n    universe: Universe;\n    pixelManagers: PixelManager[];\n  }\n\nexport interface SetupOptions {\n    url: string;\n    maxParticles: number; \n    particleOptions: Required<ParticleOptions>;\n    scale: number;\n    canvasDimensions: Dimensions;\n    creationDuration?: number;\n    deathDuration?: number;\n    creationTimingFn?: TimingFunction;\n    deathTimingFn?: TimingFunction;\n    onUniverseStateChange?: (state: UniverseState, universe: Universe) => void\n  }\n  \n const createImageUniverse = async ({url, maxParticles, particleOptions, scale, canvasDimensions, creationTimingFn, deathTimingFn, creationDuration, deathDuration, onUniverseStateChange}: SetupOptions): Promise<ImageUniverseSetupResult> => {\n  \n    const image = await getImageData(url)\n    const imageHeight = image.getHeight()\n    const imageWidth = image.getWidth()\n    let numPixels = imageHeight * imageWidth\n    let indexArray = shuffle(range(numPixels))\n    let selectedPixels = 0\n    const universe = new Universe({ \n      creationTimingFn, \n      deathTimingFn, \n      creationDuration, \n      deathDuration, \n      onStateChange: onUniverseStateChange\n    })\n    let pixelManagers: PixelManager[] = []\n    maxParticles = Math.min(numPixels, maxParticles)\n  \n    while (selectedPixels < maxParticles && indexArray.length) {\n        const nextIndex = indexArray.pop() || 0\n        const x = nextIndex % imageWidth\n        const y = Math.floor(nextIndex / imageWidth)\n  \n        let shouldCreateParticle: boolean = particleOptions.filter({x, y, image})\n\n        if (shouldCreateParticle) {\n            const subverse = universe.createSubverse()\n  \n            const pixelManager = new PixelManager({pixelX: x, pixelY: y, scale, imageHeight: image.getHeight(), imageWidth: image.getWidth(), canvasWidth: canvasDimensions.width, canvasHeight: canvasDimensions.height})\n            pixelManagers.push(pixelManager)\n            subverse.addParticleForce(pixelManager.getParticleForce())\n  \n            let color: string = particleOptions.color({x, y, image})\n  \n            let radius: number = particleOptions.radius({x, y, image})\n  \n            let friction: number = particleOptions.friction({x, y, image})\n\n            let mass: number = particleOptions.mass({x, y, image})\n  \n            let position: Vector = particleOptions.initialPosition({x, y, image, finalPosition: pixelManager.getPixelPosition(), canvasDimensions})\n  \n            let velocity: Vector = particleOptions.initialVelocity({x, y, image})\n  \n            subverse.addParticle(new Particle({radius, mass, color, friction, position, velocity}))\n            selectedPixels += 1\n        }\n  \n    }\n  \n    return { universe, pixelManagers }\n  }\n  \n  export default createImageUniverse","import { useEffect, useState } from 'react';\nimport { Universe, ParticleForce } from '../universe'\nimport { Optional, Nullable } from '../types'\n\ninterface UseTransientParticleForceParams  {\n    universe: Optional<Universe>; \n    duration?: number;\n}\n\ntype UseTransientParticleForceReturn = [\n    Nullable<ParticleForce>, \n    React.Dispatch<React.SetStateAction<Nullable<ParticleForce>>>\n]\n\nconst useTransientParticleForce = ({universe, duration = 100}: UseTransientParticleForceParams): UseTransientParticleForceReturn => {\n    const [particleForce, setParticleForce] = useState<Nullable<ParticleForce>>(null)\n\n    useEffect(() => {\n        // Reset before universe change\n        return () => {\n            setParticleForce(null)\n        }\n    }, [universe])\n\n    useEffect(() => {\n        if (universe && particleForce) {\n            universe.addParticleForce(particleForce)\n            const timeoutId = window.setTimeout(() => {\n                universe.removeParticleForce(particleForce)\n                setParticleForce(null)\n            }, duration)\n            return () => {\n                window.clearTimeout(timeoutId)\n                universe.removeParticleForce(particleForce)\n            }\n        }\n    }, [universe, particleForce, duration])\n\n    return [particleForce, setParticleForce]\n}\n\nexport default useTransientParticleForce","export type Nullable<T> = T | null;\nexport type Optional<T> = T | undefined;\n\nexport type Bounds = {\n    top: number\n    right: number\n    bottom: number\n    left: number\n};\n\nexport type Dimensions = {\n    width: number,\n    height: number\n}\n\nexport enum ImageState {\n    Loading = 'Loading',\n    Loaded = 'Loaded',\n    Error = 'Error'\n}","import React, { FC, useEffect, useRef, useCallback, useState, HTMLProps } from 'react';\nimport throttle from 'lodash.throttle'\nimport { Universe, UniverseState, CanvasRenderer, Simulator, ParticleForce, Vector, forces, PixelManager, Array2D, timing } from '../universe'\nimport { getMousePosition, getTouchPosition, RGBA } from '../utils'\nimport createImageUniverse, { ImageUniverseSetupResult } from './createImageUniverse'\nimport useTransientParticleForce from './useTransientParticleForce';\nimport { Dimensions, ImageState } from '../types'\n\nexport type PixelOptions = {\n    x: number;\n    y: number;\n    image: Array2D<RGBA>\n}\n\n/**\n * Options to be applied to particles during their creation. \n */\nexport interface ParticleOptions {\n\n    /**\n     * Given a pixel in the img, the filter determines whether or not a particle should be created for this pixel. \n     * This is run for all pixels in the image in random order until maxParticles limit is reached. If the filter\n     * returns true, a particle will be created for this pixel.\n     */\n    filter?: (options: PixelOptions) => boolean;\n\n    /**\n     * Given a pixel in the img, calculates the radius of the corresponding particle.\n     * This function is only executed on pixels whose filters return true.\n     */\n    radius?: (options: PixelOptions) => number;\n\n    /**\n     * Given a pixel in the img, calculates the mass of the corresponding particle.\n     * This function is only executed on pixels whose filters return true.\n     */\n    mass?: (options: PixelOptions) => number;\n\n    /**\n     * Given a pixel in the img, calculates the color of the corresponding particle.\n     * Fewer colors will result in better performance (higher framerates).\n     * This function is only executed on pixels whose filters return true.\n     */\n    color?: (options: PixelOptions) => string;\n\n    /**\n     * Given a pixel in the img, calculates the coefficient of kinetic friction of the corresponding particle.\n     * This should have a value between 0 and 1.\n     * This function is only executed on pixels whose filters return true.\n     */\n    friction?: (options: PixelOptions) => number;\n\n    /**\n     * Given a pixel in the img, calculates the initial position vector of the corresponding particle.\n     * This function is only executed on pixels whose filters return true.\n     */\n    initialPosition?: (options: PixelOptions & {finalPosition: Vector, canvasDimensions: Dimensions}) => Vector;\n\n    /**\n     * Given a pixel in the img, calculates the initial velocity vector of the corresponding particle.\n     * This function is only executed on pixels whose filters return true.\n     */\n    initialVelocity?: (options: PixelOptions) => Vector;\n}\n\n/**\n * Available props for ParticleImage.\n * @noInheritDoc\n */\nexport interface ParticleImageProps extends HTMLProps<HTMLCanvasElement> {\n    /**\n     * Img src url to load image\n     */\n    src: string\n\n    /**\n     * Height of the canvas.\n     */\n    height?: number;\n\n    /**\n     * Width of the canvas.\n     */\n    width?: number;\n\n    /**\n     * Scales the image provided via src.\n     */\n    scale?: number;\n\n    /**\n     * The maximum number of particles that will be created in the canvas.\n     */\n    maxParticles?: number;\n\n    /**\n     * The amount of entropy to act on the particles.\n     */\n    entropy?: number;\n\n    /**\n     * The background color of the canvas.\n     */\n    backgroundColor?: string;\n\n    /**\n     * Options to be applied to particles during their creation.\n     */\n    particleOptions?: ParticleOptions;\n\n    /**\n     * An interactive force to be applied to the particles during mousemove events.\n     */\n    mouseMoveForce?: (x: number, y: number) => ParticleForce;\n\n    /**\n     * Time in milliseconds that force resulting from mousemove event should last in universe.\n     */\n    mouseMoveForceDuration?: number;\n\n    /**\n     * An interactive force to be applied to the particles during touchmove events.\n     */\n    touchMoveForce?: (x: number, y: number) => ParticleForce;\n\n    /**\n     * Time in milliseconds that force resulting from mousemove event should last in universe.\n     */\n    touchMoveForceDuration?: number;\n\n    /**\n     * An interactive force to be applied to the particles during mousedown events.\n     */\n    mouseDownForce?: (x: number, y: number) => ParticleForce;\n\n    /**\n     * Time in milliseconds that force resulting from mousemove event should last in universe.\n     */\n    mouseDownForceDuration?: number;\n\n    /**\n     * The duration in milliseconds that it should take for the universe to reach full health.\n     */\n    creationDuration?: number;\n\n    /**\n     * The duration in milliseconds that it should take for the universe to die.\n     */\n    deathDuration?: number;\n\n    /**\n     * A timing function to dictate how the particles in the universe grow from radius zero to their full radius.\n     * This function receives a progress argument between 0 and 1 and should return a number between 0 and 1.\n     */\n    creationTimingFn?: timing.TimingFunction;\n\n    /**\n     * A timing function to dictate how the particles in the universe shrink from their full radius to radius zero.\n     * This function receives a progress argument between 0 and 1 and should return a number between 0 and 1.\n     */\n    deathTimingFn?: timing.TimingFunction;\n\n    /**\n     * Callback invoked on universe state changes.\n     */\n    onUniverseStateChange?: (state: UniverseState, universe: Universe) => void;\n\n    /**\n     * Callback invoked on image loading state changes.\n     */\n    onImageStateChange?: (state: ImageState) => void;\n}\n\n/**\n * Default particle options\n * @internal\n */\nconst defaultParticleOptions: Required<ParticleOptions> = {\n    filter: () => true,\n    radius: () => 1,\n    mass: () => 50,\n    color: () => 'white',\n    friction: () => .15,\n    initialPosition: ({finalPosition}) => finalPosition,\n    initialVelocity: () => new Vector(0, 0)\n}\n\nconst ParticleImage: FC<ParticleImageProps> = ({\n    src, \n    height = 400, \n    width = 400, \n    scale = 1, \n    maxParticles = 5000, \n    entropy = 20, \n    backgroundColor = '#222', \n    particleOptions = {}, \n    mouseMoveForce, \n    touchMoveForce, \n    mouseDownForce,\n    mouseMoveForceDuration = 100,\n    touchMoveForceDuration = 100,\n    mouseDownForceDuration = 100,\n    creationTimingFn,\n    creationDuration,\n    deathTimingFn,\n    deathDuration,\n    onUniverseStateChange,\n    onImageStateChange,\n    style={}, \n    ...otherProps\n}) => {\n    \n    const [canvas, setCanvas] = useState<HTMLCanvasElement>()\n    const [universe, setUniverse] = useState<Universe>()\n    const simulatorRef = useRef<Simulator>()\n    const entropyForceRef = useRef<ParticleForce>()\n    const [pixelManagers, setPixelManagers] = useState<PixelManager[]>([])\n\n    const mergedParticleOptions: Required<ParticleOptions> = {\n        ...defaultParticleOptions,\n        ...particleOptions\n    }\n\n    useEffect(() => {\n        if (canvas) {\n            const renderer = new CanvasRenderer(canvas)\n            const simulator = new Simulator(renderer)\n            simulatorRef.current = simulator\n            simulator.start()\n            return () => simulator.stop()\n        }\n    }, [canvas])\n\n    useEffect(() => {\n        if (canvas) {\n            const canvasDimensions = {\n                width: canvas.width,\n                height: canvas.height\n            }\n            const death = universe?.die()\n            const setUp = createImageUniverse({\n                url: src, \n                maxParticles, \n                particleOptions: mergedParticleOptions, \n                scale, \n                canvasDimensions,\n                creationTimingFn,\n                creationDuration,\n                deathTimingFn,\n                deathDuration,\n                onUniverseStateChange\n            })\n            onImageStateChange?.(ImageState.Loading)\n            setUp\n                .then(() => {\n                    onImageStateChange?.(ImageState.Loaded)\n                })\n                .catch(() => {\n                    onImageStateChange?.(ImageState.Error)\n                })\n            Promise.all<ImageUniverseSetupResult, void>([setUp, death])\n                .then(([{universe, pixelManagers}]) => {\n                    setPixelManagers(pixelManagers)\n                    universe.addParticleForce(forces.friction)\n                    simulatorRef.current?.setUniverse(universe)\n                    setUniverse(universe)\n                })\n                .catch(() => {\n                    // Eat it here, let the consumer handle it via onImageStateChange\n                })\n        }\n    }, [canvas, src])\n\n    useEffect(() => {\n        universe?.setOnStateChange(onUniverseStateChange)\n    }, [universe, onUniverseStateChange])\n\n    const updateScale = useCallback(throttle((scale: number) => {\n        pixelManagers.forEach((pixelManager) => {\n            pixelManager.setScale(scale)\n        })\n    }, 50), [pixelManagers])\n\n    const updateWidth = useCallback(throttle((width: number) => {\n        pixelManagers.forEach((pixelManager) => {\n            pixelManager.setCanvasWidth(width)\n        })\n    }, 50), [pixelManagers])\n\n    const updateHeight = useCallback(throttle((height: number) => {\n        pixelManagers.forEach((pixelManager) => {\n            pixelManager.setCanvasHeight(height)\n        })\n    }, 50), [pixelManagers])\n\n    useEffect(() => {\n        updateScale(scale)\n    }, [scale, updateScale])\n\n    useEffect(() => {\n        updateWidth(width)\n    }, [width, updateWidth])\n\n    useEffect(() => {\n        updateHeight(height)\n    }, [height, updateHeight])\n\n    useEffect(() => {\n        const entropyForce = forces.entropy(entropy)\n        universe?.addParticleForce(entropyForce)\n        entropyForceRef.current = entropyForce\n        return () => {\n            universe?.removeParticleForce(entropyForce)\n        }\n    }, [entropy, canvas, universe])\n\n    const [mouseMoveParticleForce, setMouseMoveParticleForce] = useTransientParticleForce({universe, duration: mouseMoveForceDuration})\n    const [touchMoveParticleForce, setTouchMoveParticleForce] = useTransientParticleForce({universe, duration: touchMoveForceDuration})\n    const [mouseDownParticleForce, setMouseDownParticleForce] = useTransientParticleForce({universe, duration: mouseDownForceDuration})\n\n    const handleMouseMove = (e) => {\n        if (mouseMoveForce) {\n            const position = getMousePosition(e)\n            setMouseMoveParticleForce(() => mouseMoveForce(position.x, position.y))\n        }\n        otherProps.onMouseMove?.(e)\n    }\n\n    const handleTouchMove = (e) => {\n        if (touchMoveForce) {\n            const position = getTouchPosition(e)\n            setTouchMoveParticleForce(() => touchMoveForce(position.x, position.y))\n        }\n        otherProps.onTouchMove?.(e)\n    }\n\n    const handleMouseDown = (e) => {\n        if (mouseDownForce) {\n            const position = getMousePosition(e)\n            setMouseDownParticleForce(() => mouseDownForce(position.x, position.y))\n        }\n        otherProps.onMouseDown?.(e)\n    }\n\n    return (\n        <canvas\n            {...otherProps}\n            onMouseMove={handleMouseMove} \n            onTouchMove={handleTouchMove} \n            onMouseDown={handleMouseDown}\n            height={height} \n            width={width} \n            style={{backgroundColor, touchAction: 'none', ...style}} \n            ref={(c) =>  {\n                if (c?.getContext('2d')) {\n                    setCanvas(c)\n                }\n            }}\n        />\n    )\n}\n\nexport default ParticleImage"]},"metadata":{},"sourceType":"module"}